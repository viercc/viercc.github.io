<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Too lazy to evaluate - 可換なモナドとは？細かい計算部分</title>
        <link rel="stylesheet" href="../css/syntax.css" />
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Too lazy to evaluate</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>可換なモナドとは？細かい計算部分</h1>
            <article>
    <section class="header">
        Posted on February 29, 2020
        
    </section>
    <section>
        <p>（直前の投稿の付録です。）</p>
<p>単位律は簡単なので結合律だけゴリゴリ計算します。</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" title="1">x <span class="fu">=</span> <span class="dt">ListT</span><span class="ot"> mta ::</span> <span class="dt">ListT</span> m a</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="ot">f ::</span> a <span class="ot">-&gt;</span> <span class="dt">ListT</span> m b</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="ot">g ::</span> b <span class="ot">-&gt;</span> <span class="dt">ListT</span> m c</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5">x <span class="fu">&gt;&gt;=</span> f</a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="fu">=</span> <span class="dt">ListT</span> mta <span class="fu">&gt;&gt;=</span> f</a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> mta <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f)</a>
<a class="sourceLine" id="cb1-8" title="8">(x <span class="fu">&gt;&gt;=</span> f) <span class="fu">&gt;&gt;=</span> g</a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-10" title="10">     (<span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> mta <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f)) <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-11" title="11">     <span class="fu">traverse</span> (runListT <span class="fu">.</span> g)</a>
<a class="sourceLine" id="cb1-12" title="12">   <span class="co">-- fmap f mx &gt;&gt;= k  =  mx &gt;&gt;= (k . f)</span></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-14" title="14">    (mta <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f)) <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-15" title="15">    (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g) <span class="fu">.</span> <span class="fu">concat</span>)</a>
<a class="sourceLine" id="cb1-16" title="16">   <span class="co">-- 補題(traverse-concat)</span></a>
<a class="sourceLine" id="cb1-17" title="17">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-18" title="18">    (mta <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f)) <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-19" title="19">    (<span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">.</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g)))</a>
<a class="sourceLine" id="cb1-20" title="20">   <span class="co">-- fmapを移動</span></a>
<a class="sourceLine" id="cb1-21" title="21">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-22" title="22">    (mta <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f)) <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-23" title="23">    <span class="fu">traverse</span> (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g))</a>
<a class="sourceLine" id="cb1-24" title="24">   <span class="co">-- fmapを融合</span></a>
<a class="sourceLine" id="cb1-25" title="25">   <span class="co">-- Monad m の結合法則</span></a>
<a class="sourceLine" id="cb1-26" title="26">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> (<span class="fu">concat</span> <span class="fu">.</span> <span class="fu">concat</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-27" title="27">    mta <span class="fu">&gt;&gt;=</span> \ta <span class="ot">-&gt;</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f) ta <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g))</a>
<a class="sourceLine" id="cb1-28" title="28">   <span class="co">-- join と fmap を使って                     ^ ここの&gt;&gt;=を書き換える</span></a>
<a class="sourceLine" id="cb1-29" title="29">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> (<span class="fu">concat</span> <span class="fu">.</span> <span class="fu">concat</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-30" title="30">    mta <span class="fu">&gt;&gt;=</span> \ta <span class="ot">-&gt;</span></a>
<a class="sourceLine" id="cb1-31" title="31">      join <span class="fu">.</span> <span class="fu">fmap</span> (<span class="fu">traverse</span> (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g))) <span class="fu">.</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f) <span class="fu">$</span> ta</a>
<a class="sourceLine" id="cb1-32" title="32">   <span class="co">-- eta-reduction</span></a>
<a class="sourceLine" id="cb1-33" title="33">   <span class="co">-- Traversable則, composition</span></a>
<a class="sourceLine" id="cb1-34" title="34">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> (<span class="fu">concat</span> <span class="fu">.</span> <span class="fu">concat</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-35" title="35">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-36" title="36">      join <span class="fu">.</span> runCompose <span class="fu">.</span> <span class="fu">traverse</span> (<span class="dt">Compose</span> <span class="fu">.</span> <span class="fu">fmap</span> (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g)) <span class="fu">.</span> runListT <span class="fu">.</span> f)</a>
<a class="sourceLine" id="cb1-37" title="37">   <span class="co">-- join . runCompose = join'</span></a>
<a class="sourceLine" id="cb1-38" title="38">   <span class="co">-- Traversable則, naturality</span></a>
<a class="sourceLine" id="cb1-39" title="39">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> (<span class="fu">concat</span> <span class="fu">.</span> <span class="fu">concat</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-40" title="40">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-41" title="41">      <span class="fu">traverse</span> (join' <span class="fu">.</span> <span class="dt">Compose</span> <span class="fu">.</span> <span class="fu">fmap</span> (<span class="fu">traverse</span> (runListT <span class="fu">.</span> g)) <span class="fu">.</span> runListT <span class="fu">.</span> f)</a>
<a class="sourceLine" id="cb1-42" title="42">   <span class="co">-- join' . Compose = join . runCompose . Compose = join</span></a>
<a class="sourceLine" id="cb1-43" title="43">   <span class="co">-- join . fmap g . f = (f &gt;=&gt; g)</span></a>
<a class="sourceLine" id="cb1-44" title="44">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> (<span class="fu">concat</span> <span class="fu">.</span> <span class="fu">concat</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-45" title="45">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-46" title="46">      <span class="fu">traverse</span> (runListT <span class="fu">.</span> f <span class="fu">&gt;=&gt;</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> g)))</a>
<a class="sourceLine" id="cb1-47" title="47">   <span class="co">-- concat = リストモナド[]のjoin なので、結合律が成り立っていて、</span></a>
<a class="sourceLine" id="cb1-48" title="48">   <span class="co">--   concat . concat = concat . fmap concat</span></a>
<a class="sourceLine" id="cb1-49" title="49">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> <span class="fu">fmap</span> (<span class="fu">fmap</span> <span class="fu">concat</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-50" title="50">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-51" title="51">      <span class="fu">traverse</span> (runListT <span class="fu">.</span> f <span class="fu">&gt;=&gt;</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> g)))</a>
<a class="sourceLine" id="cb1-52" title="52">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-53" title="53">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-54" title="54">      <span class="fu">fmap</span> (<span class="fu">fmap</span> <span class="fu">concat</span>) <span class="fu">.</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> f <span class="fu">&gt;=&gt;</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> g))</a>
<a class="sourceLine" id="cb1-55" title="55">   <span class="co">-- fmap (fmap h) . traverse f</span></a>
<a class="sourceLine" id="cb1-56" title="56">   <span class="co">--   = fmap (fmap h) . sequenceA . fmap f</span></a>
<a class="sourceLine" id="cb1-57" title="57">   <span class="co">--   = sequenceA . fmap (fmap h) . fmap f</span></a>
<a class="sourceLine" id="cb1-58" title="58">   <span class="co">--   = traverse (fmap h . f)</span></a>
<a class="sourceLine" id="cb1-59" title="59">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-60" title="60">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-61" title="61">      <span class="fu">traverse</span> (<span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">.</span> (runListT <span class="fu">.</span> f <span class="fu">&gt;=&gt;</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> g)))</a>
<a class="sourceLine" id="cb1-62" title="62">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-63" title="63">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-64" title="64">      <span class="fu">traverse</span> (\a <span class="ot">-&gt;</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> runListT (f a) <span class="fu">&gt;&gt;=</span> <span class="fu">traverse</span> (runListT <span class="fu">.</span> g))</a>
<a class="sourceLine" id="cb1-65" title="65">   <span class="co">-- ListTの(&gt;&gt;=)の定義と、外側のtraverseの中の関数を比べると、次がわかる</span></a>
<a class="sourceLine" id="cb1-66" title="66">  <span class="fu">=</span> <span class="dt">ListT</span> <span class="fu">$</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span></a>
<a class="sourceLine" id="cb1-67" title="67">    mta <span class="fu">&gt;&gt;=</span></a>
<a class="sourceLine" id="cb1-68" title="68">      <span class="fu">traverse</span> (runListT <span class="fu">.</span> (\a <span class="ot">-&gt;</span> f a <span class="fu">&gt;&gt;=</span> g)</a>
<a class="sourceLine" id="cb1-69" title="69">  <span class="fu">=</span> <span class="dt">ListT</span> mta <span class="fu">&gt;&gt;=</span> (\a <span class="ot">-&gt;</span> f a <span class="fu">&gt;&gt;=</span> g)</a>
<a class="sourceLine" id="cb1-70" title="70">  <span class="fu">=</span> x <span class="fu">&gt;&gt;=</span> (\a <span class="ot">-&gt;</span> f a <span class="fu">&gt;&gt;=</span> g)</a></code></pre></div>
<p>計算中に、次の補題(traverse-concat)を使いました。</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" title="1"><span class="co">-- fを任意のApplicative, h :: a -&gt; f b, tta :: [[a]] とする。</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">-- 以下の式が成り立つ。</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="fu">traverse</span> h (<span class="fu">concat</span> tta) <span class="fu">=</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> h) tta</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">-- まず次の事実を示しておく。</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="fu">traverse</span> h (x <span class="fu">++</span> y) <span class="fu">=</span> (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h x <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="co">-- xに関する帰納法。</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="co">-- x = []のとき</span></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="fu">traverse</span> h ([] <span class="fu">++</span> y) <span class="fu">=</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-10" title="10">  (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h [] <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="fu">=</span> (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">pure</span> [] <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="fu">=</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-13" title="13">  </a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="co">-- x = a:x' のとき</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="fu">traverse</span> h ((a <span class="fu">:</span> x') <span class="fu">++</span> y)</a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="fu">=</span> <span class="fu">traverse</span> h (a <span class="fu">:</span> x' <span class="fu">++</span> y)</a>
<a class="sourceLine" id="cb2-17" title="17">    <span class="fu">=</span> (<span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> h a <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h (x' <span class="fu">++</span> y)</a>
<a class="sourceLine" id="cb2-18" title="18">  (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h (a <span class="fu">:</span> x') <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-19" title="19">    <span class="fu">=</span> (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> ((<span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> h a <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h x') <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-20" title="20">    <span class="fu">=</span> (\b xb yb <span class="ot">-&gt;</span> (b <span class="fu">:</span> xb) <span class="fu">++</span> yb) <span class="fu">&lt;$&gt;</span> h a <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h x' <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-21" title="21">    <span class="fu">=</span> (\b xb yb <span class="ot">-&gt;</span> b <span class="fu">:</span> (xb <span class="fu">++</span> yb)) <span class="fu">&lt;$&gt;</span> h a <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h x' <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y</a>
<a class="sourceLine" id="cb2-22" title="22">      <span class="co">-- Applicative則でごちゃごちゃやる</span></a>
<a class="sourceLine" id="cb2-23" title="23">    <span class="fu">=</span> (<span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> h a <span class="fu">&lt;*&gt;</span> ((<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h x' <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h y)</a>
<a class="sourceLine" id="cb2-24" title="24">      <span class="co">-- 帰納法の仮定</span></a>
<a class="sourceLine" id="cb2-25" title="25">    <span class="fu">=</span> (<span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> h a <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h (x' <span class="fu">++</span> y)</a>
<a class="sourceLine" id="cb2-26" title="26"></a>
<a class="sourceLine" id="cb2-27" title="27"><span class="co">-- 証明。 ttaに関する帰納法</span></a>
<a class="sourceLine" id="cb2-28" title="28">  <span class="co">-- tta = [] のとき</span></a>
<a class="sourceLine" id="cb2-29" title="29">  <span class="fu">traverse</span> h (<span class="fu">concat</span> []) <span class="fu">=</span> <span class="fu">traverse</span> h [] <span class="fu">=</span> <span class="fu">pure</span> []</a>
<a class="sourceLine" id="cb2-30" title="30">  <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> h) [] <span class="fu">=</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> <span class="fu">pure</span> [] <span class="fu">=</span> <span class="fu">pure</span> []</a>
<a class="sourceLine" id="cb2-31" title="31"></a>
<a class="sourceLine" id="cb2-32" title="32">  <span class="co">-- tta = ta : tta' のとき</span></a>
<a class="sourceLine" id="cb2-33" title="33">  <span class="fu">traverse</span> h (<span class="fu">concat</span> (ta <span class="fu">:</span> tta'))</a>
<a class="sourceLine" id="cb2-34" title="34">    <span class="fu">=</span> <span class="fu">traverse</span> h (ta <span class="fu">++</span> <span class="fu">concat</span> tta')</a>
<a class="sourceLine" id="cb2-35" title="35">    <span class="fu">=</span> (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h ta <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h (<span class="fu">concat</span> tta')</a>
<a class="sourceLine" id="cb2-36" title="36">  <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> h) (ta <span class="fu">:</span> tta')</a>
<a class="sourceLine" id="cb2-37" title="37">    <span class="fu">=</span> <span class="fu">fmap</span> <span class="fu">concat</span> <span class="fu">$</span> (<span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h ta <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> h) tta'</a>
<a class="sourceLine" id="cb2-38" title="38">    <span class="fu">=</span> (\tb ttb <span class="ot">-&gt;</span> <span class="fu">concat</span> (tb <span class="fu">:</span> ttb)) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h ta <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> h) tta'</a>
<a class="sourceLine" id="cb2-39" title="39">    <span class="fu">=</span> (\tb ttb <span class="ot">-&gt;</span> tb <span class="fu">++</span> <span class="fu">concat</span> ttb) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h ta <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> (<span class="fu">traverse</span> h) tta'</a>
<a class="sourceLine" id="cb2-40" title="40">    <span class="fu">=</span> (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h ta <span class="fu">&lt;*&gt;</span> <span class="fu">fmap</span> <span class="fu">concat</span> (<span class="fu">traverse</span> (<span class="fu">traverse</span> h) tta')</a>
<a class="sourceLine" id="cb2-41" title="41">      <span class="co">-- 帰納法の仮定</span></a>
<a class="sourceLine" id="cb2-42" title="42">    <span class="fu">=</span> (<span class="fu">++</span>) <span class="fu">&lt;$&gt;</span> <span class="fu">traverse</span> h ta <span class="fu">&lt;*&gt;</span> <span class="fu">traverse</span> h (<span class="fu">concat</span> tta')</a></code></pre></div>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
