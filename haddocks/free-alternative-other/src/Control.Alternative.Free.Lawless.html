<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTSyntax #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">-- | Free @Alternative@ (with no laws beyond monoidal).</span><span>
</span><span id="line-12"></span><span class="hs-comment">--</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Free 'Alternative' but assumes no laws relating</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- @Applicative@ structure and @Alternative@ methods,</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- just inherited @Applicative@ laws and @(empty, '&lt;|&gt;')@ being</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- monoid.</span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Alternative.Free.Lawless</span><span class="hs-special">(</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Type definitions</span></span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier">Free</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#SumOf"><span class="hs-identifier">SumOf</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#ApOf"><span class="hs-identifier">ApOf</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier">Factor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier">Summand</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#viewAp"><span class="hs-identifier">viewAp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#reviewAp"><span class="hs-identifier">reviewAp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#viewSum"><span class="hs-identifier">viewSum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#reviewSum"><span class="hs-identifier">reviewSum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Universal property</span></span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#liftFree"><span class="hs-identifier">liftFree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#hoistFree"><span class="hs-identifier">hoistFree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#foldFree"><span class="hs-identifier">foldFree</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Auxiliary types</span></span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier">Ap'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier">toAp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#notOneAp"><span class="hs-identifier">notOneAp</span></a></span><span>
</span><span id="line-28"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Alternative</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative.Free</span></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NotOne</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">asum</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">FFunctor</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FFunctor.Lift1.html"><span class="hs-identifier">FFunctor.Lift1</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FFunctor.Tannen.html"><span class="hs-identifier">FFunctor.Tannen</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">FFunctor.FCompose</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Bifunctor</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">FMonad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FMonad</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">data</span><span> </span><span id="Free"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-var">Free</span></a></span></span><span> </span><span id="local-6989586621679080275"><span class="annot"><a href="#local-6989586621679080275"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679080276"><span class="annot"><a href="#local-6989586621679080276"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-45"></span><span>    </span><span id="FreeLift"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-var">FreeLift</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679080275"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080276"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FreeSumOf%27"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-var">FreeSumOf'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NotOne</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080275"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080276"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FreeApOf%27"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-var">FreeApOf'</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080275"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080276"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679080436"><span id="local-6989586621679080446"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Free f a -&gt; Free f b)
-&gt; (forall a b. a -&gt; Free f b -&gt; Free f a) -&gt; Functor (Free f)
forall a b. a -&gt; Free f b -&gt; Free f a
forall a b. (a -&gt; b) -&gt; Free f a -&gt; Free f b
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; Free f b -&gt; Free f a
forall (f :: * -&gt; *) a b.
Functor f =&gt;
(a -&gt; b) -&gt; Free f a -&gt; Free f b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
(a -&gt; b) -&gt; Free f a -&gt; Free f b
fmap :: forall a b. (a -&gt; b) -&gt; Free f a -&gt; Free f b
$c&lt;$ :: forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; Free f b -&gt; Free f a
&lt;$ :: forall a b. a -&gt; Free f b -&gt; Free f a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679080193"><span id="local-6989586621679080461"><span id="local-6989586621679080465"><span id="local-6989586621679080468"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679080193"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080193"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>  </span><span id="local-6989586621679080474"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; Free f a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ap (Factor f) a -&gt; Free f a
forall (f :: * -&gt; *) a. Functor f =&gt; Ap (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewAp"><span class="hs-identifier hs-var">reviewAp</span></a></span><span> </span><span class="annot"><span class="annottext">(Ap (Factor f) a -&gt; Free f a)
-&gt; (a -&gt; Ap (Factor f) a) -&gt; a -&gt; Free f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Ap (Factor f) a
forall a. a -&gt; Ap (Factor f) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-52"></span><span>  </span><span id="local-6989586621679080478"><span class="annot"><span class="annottext">Free f (a -&gt; b)
</span><a href="#local-6989586621679080478"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679080479"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. Free f (a -&gt; b) -&gt; Free f a -&gt; Free f b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span id="local-6989586621679080480"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080480"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ap (Factor f) b -&gt; Free f b
forall (f :: * -&gt; *) a. Functor f =&gt; Ap (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewAp"><span class="hs-identifier hs-var">reviewAp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Free f (a -&gt; b) -&gt; Ap (Factor f) (a -&gt; b)
forall (f :: * -&gt; *) a. Free f a -&gt; Ap (Factor f) a
</span><a href="Control.Alternative.Free.Lawless.html#viewAp"><span class="hs-identifier hs-var">viewAp</span></a></span><span> </span><span class="annot"><span class="annottext">Free f (a -&gt; b)
</span><a href="#local-6989586621679080478"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Ap (Factor f) (a -&gt; b) -&gt; Ap (Factor f) a -&gt; Ap (Factor f) b
forall a b.
Ap (Factor f) (a -&gt; b) -&gt; Ap (Factor f) a -&gt; Ap (Factor f) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Free f a -&gt; Ap (Factor f) a
forall (f :: * -&gt; *) a. Free f a -&gt; Ap (Factor f) a
</span><a href="Control.Alternative.Free.Lawless.html#viewAp"><span class="hs-identifier hs-var">viewAp</span></a></span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080480"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679080211"><span id="local-6989586621679080487"><span id="local-6989586621679080491"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679080211"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080211"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>  </span><span id="local-6989586621679080496"><span class="annot"><span class="annottext">empty :: forall a. Free f a
</span><a href="#local-6989586621679080496"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Summand f a] -&gt; Free f a
forall (f :: * -&gt; *) a. [Summand f a] -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewSum"><span class="hs-identifier hs-var">reviewSum</span></a></span><span> </span><span class="annot"><span class="annottext">[Summand f a]
forall a. [a]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><span class="hs-identifier hs-var">empty</span></span><span>
</span><span id="line-56"></span><span>  </span><span id="local-6989586621679080499"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080499"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679080500"><span class="annot"><span class="annottext">&lt;|&gt; :: forall a. Free f a -&gt; Free f a -&gt; Free f a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;|&gt;</span></span></span><span> </span><span id="local-6989586621679080501"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080501"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Summand f a] -&gt; Free f a
forall (f :: * -&gt; *) a. [Summand f a] -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewSum"><span class="hs-identifier hs-var">reviewSum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Free f a -&gt; [Summand f a]
forall (f :: * -&gt; *) a. Free f a -&gt; [Summand f a]
</span><a href="Control.Alternative.Free.Lawless.html#viewSum"><span class="hs-identifier hs-var">viewSum</span></a></span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080499"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[Summand f a] -&gt; [Summand f a] -&gt; [Summand f a]
forall a. [a] -&gt; [a] -&gt; [a]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Free f a -&gt; [Summand f a]
forall (f :: * -&gt; *) a. Free f a -&gt; [Summand f a]
</span><a href="Control.Alternative.Free.Lawless.html#viewSum"><span class="hs-identifier hs-var">viewSum</span></a></span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080501"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FFunctor</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-59"></span><span>  </span><span id="local-6989586621679080509"><span class="annot"><span class="annottext">ffmap :: forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Free g x -&gt; Free h x
</span><a href="#local-6989586621679080509"><span class="hs-identifier hs-var hs-var hs-var hs-var">ffmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. g x -&gt; h x) -&gt; Free g x -&gt; Free h x
forall (f :: * -&gt; *) (g :: * -&gt; *) a.
(forall x. f x -&gt; g x) -&gt; Free f a -&gt; Free g a
</span><a href="Control.Alternative.Free.Lawless.html#hoistFree"><span class="hs-identifier hs-var">hoistFree</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FMonad</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-62"></span><span>  </span><span id="local-6989586621679080518"><span class="annot"><span class="annottext">fpure :: forall (g :: * -&gt; *). Functor g =&gt; g ~&gt; Free g
</span><a href="#local-6989586621679080518"><span class="hs-identifier hs-var hs-var hs-var hs-var">fpure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g x -&gt; Free g x
forall (f :: * -&gt; *) a. f a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#liftFree"><span class="hs-identifier hs-var">liftFree</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621679080523"><span class="annot"><span class="annottext">fbind :: forall (g :: * -&gt; *) (h :: * -&gt; *) a.
(Functor g, Functor h) =&gt;
(g ~&gt; Free h) -&gt; Free g a -&gt; Free h a
</span><a href="#local-6989586621679080523"><span class="hs-identifier hs-var hs-var hs-var hs-var">fbind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. g x -&gt; Free h x) -&gt; Free g a -&gt; Free h a
forall (f :: * -&gt; *) (g :: * -&gt; *) a.
Alternative g =&gt;
(forall x. f x -&gt; g x) -&gt; Free f a -&gt; g a
</span><a href="Control.Alternative.Free.Lawless.html#foldFree"><span class="hs-identifier hs-var">foldFree</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="annot"><span class="hs-comment">-- | View as a list of 'Summand's</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#SumOf"><span class="hs-identifier hs-type">SumOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679080251"><span id="local-6989586621679080252"><span class="hs-special">[</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080252"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080252"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">pattern</span><span> </span><span id="SumOf"><span id="%24mSumOf"><span id="%24bSumOf"><span class="annot"><span class="annottext">$mSumOf :: forall {r} {f :: * -&gt; *} {a}.
Free f a -&gt; ([Summand f a] -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
$bSumOf :: forall (f :: * -&gt; *) a. [Summand f a] -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#SumOf"><span class="hs-identifier hs-var hs-var hs-var hs-var">SumOf</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621679080528"><span class="hs-identifier hs-type">fas</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#viewSum"><span class="hs-identifier hs-type">viewSum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679080528"><span class="annot"><a href="#local-6989586621679080528"><span class="hs-identifier hs-var">fas</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#SumOf"><span class="hs-identifier hs-var">SumOf</span></a></span><span> </span><span id="local-6989586621679080529"><span class="annot"><span class="annottext">[Summand f a]
</span><a href="#local-6989586621679080529"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Summand f a] -&gt; Free f a
forall (f :: * -&gt; *) a. [Summand f a] -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewSum"><span class="hs-identifier hs-var">reviewSum</span></a></span><span> </span><span class="annot"><span class="annottext">[Summand f a]
</span><a href="#local-6989586621679080529"><span class="hs-identifier hs-var">fas</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span id="local-6989586621679080216"><span id="local-6989586621679080217"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#viewSum"><span class="hs-identifier hs-type">viewSum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080216"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080217"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080216"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080217"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-71"></span><span id="viewSum"><span class="annot"><span class="annottext">viewSum :: forall (f :: * -&gt; *) a. Free f a -&gt; [Summand f a]
</span><a href="Control.Alternative.Free.Lawless.html#viewSum"><span class="hs-identifier hs-var hs-var">viewSum</span></a></span></span><span> </span><span id="local-6989586621679080535"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080535"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080535"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-72"></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-type">FreeLift</span></a></span><span> </span><span id="local-6989586621679080536"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080536"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Summand f a -&gt; [Summand f a]
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Summand f a -&gt; [Summand f a])
-&gt; (f a -&gt; Summand f a) -&gt; f a -&gt; [Summand f a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Either (f a) (Ap' (Factor f) a) -&gt; Summand f a
forall (f :: * -&gt; *) a.
Either (f a) (Ap' (Factor f) a) -&gt; Summand f a
</span><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-var">Summand</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (f a) (Ap' (Factor f) a) -&gt; Summand f a)
-&gt; (f a -&gt; Either (f a) (Ap' (Factor f) a)) -&gt; f a -&gt; Summand f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">f a -&gt; Either (f a) (Ap' (Factor f) a)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(f a -&gt; [Summand f a]) -&gt; f a -&gt; [Summand f a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080536"><span class="hs-identifier hs-var">fa</span></a></span><span>
</span><span id="line-73"></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-type">FreeSumOf'</span></a></span><span> </span><span id="local-6989586621679080537"><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080537"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a) -&gt; [Summand f a]
forall a. NotOne a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">F.toList</span></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080537"><span class="hs-identifier hs-var">fas</span></a></span><span>
</span><span id="line-74"></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-type">FreeApOf'</span></a></span><span> </span><span id="local-6989586621679080539"><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080539"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Summand f a -&gt; [Summand f a]
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Summand f a -&gt; [Summand f a])
-&gt; (Ap' (Factor f) a -&gt; Summand f a)
-&gt; Ap' (Factor f) a
-&gt; [Summand f a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Either (f a) (Ap' (Factor f) a) -&gt; Summand f a
forall (f :: * -&gt; *) a.
Either (f a) (Ap' (Factor f) a) -&gt; Summand f a
</span><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-var">Summand</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (f a) (Ap' (Factor f) a) -&gt; Summand f a)
-&gt; (Ap' (Factor f) a -&gt; Either (f a) (Ap' (Factor f) a))
-&gt; Ap' (Factor f) a
-&gt; Summand f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a -&gt; Either (f a) (Ap' (Factor f) a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Ap' (Factor f) a -&gt; [Summand f a])
-&gt; Ap' (Factor f) a -&gt; [Summand f a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080539"><span class="hs-identifier hs-var">fas</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span id="local-6989586621679080213"><span id="local-6989586621679080214"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#reviewSum"><span class="hs-identifier hs-type">reviewSum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080213"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080214"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080213"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080214"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-77"></span><span id="reviewSum"><span class="annot"><span class="annottext">reviewSum :: forall (f :: * -&gt; *) a. [Summand f a] -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewSum"><span class="hs-identifier hs-var hs-var">reviewSum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Summand f a -&gt; Free f a)
-&gt; (NotOne (Summand f a) -&gt; Free f a)
-&gt; Either (Summand f a) (NotOne (Summand f a))
-&gt; Free f a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">Summand f a -&gt; Free f a
forall (f :: * -&gt; *) a. Summand f a -&gt; Free f a
</span><a href="#local-6989586621679080541"><span class="hs-identifier hs-var">injectSummand</span></a></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a) -&gt; Free f a
forall (f :: * -&gt; *) a. NotOne (Summand f a) -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-var">FreeSumOf'</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (Summand f a) (NotOne (Summand f a)) -&gt; Free f a)
-&gt; ([Summand f a] -&gt; Either (Summand f a) (NotOne (Summand f a)))
-&gt; [Summand f a]
-&gt; Free f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Summand f a] -&gt; Either (Summand f a) (NotOne (Summand f a))
forall a. [a] -&gt; Either a (NotOne a)
</span><span class="hs-identifier hs-var">notOne</span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-79"></span><span>    </span><span id="local-6989586621679080273"><span id="local-6989586621679080274"><span class="annot"><a href="#local-6989586621679080541"><span class="hs-identifier hs-type">injectSummand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080273"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080274"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080273"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080274"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-80"></span><span>    </span><span id="local-6989586621679080541"><span class="annot"><span class="annottext">injectSummand :: forall (f :: * -&gt; *) a. Summand f a -&gt; Free f a
</span><a href="#local-6989586621679080541"><span class="hs-identifier hs-var hs-var">injectSummand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f a -&gt; Free f a)
-&gt; (Ap' (Factor f) a -&gt; Free f a)
-&gt; Either (f a) (Ap' (Factor f) a)
-&gt; Free f a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">f a -&gt; Free f a
forall (f :: * -&gt; *) a. f a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-var">FreeLift</span></a></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a -&gt; Free f a
forall (f :: * -&gt; *) a. Ap' (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-var">FreeApOf'</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (f a) (Ap' (Factor f) a) -&gt; Free f a)
-&gt; (Summand f a -&gt; Either (f a) (Ap' (Factor f) a))
-&gt; Summand f a
-&gt; Free f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Summand f a -&gt; Either (f a) (Ap' (Factor f) a)
forall (f :: * -&gt; *) a.
Summand f a -&gt; Either (f a) (Ap' (Factor f) a)
</span><a href="Control.Alternative.Free.Lawless.html#runSummand"><span class="hs-identifier hs-var">runSummand</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="annot"><span class="hs-comment">-- | View as a @Ap@, formal chain of @&lt;*&gt;@, of 'Factor's.</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#ApOf"><span class="hs-identifier hs-type">ApOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679080162"><span id="local-6989586621679080281"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679080162"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080162"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080281"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080162"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080281"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">pattern</span><span> </span><span id="ApOf"><span id="%24mApOf"><span id="%24bApOf"><span class="annot"><span class="annottext">$mApOf :: forall {r} {f :: * -&gt; *} {a}.
Functor f =&gt;
Free f a -&gt; (Ap (Factor f) a -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
$bApOf :: forall (f :: * -&gt; *) a. Functor f =&gt; Ap (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#ApOf"><span class="hs-identifier hs-var hs-var hs-var hs-var">ApOf</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621679080547"><span class="hs-identifier hs-type">fas</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#viewAp"><span class="hs-identifier hs-type">viewAp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679080547"><span class="annot"><a href="#local-6989586621679080547"><span class="hs-identifier hs-var">fas</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#ApOf"><span class="hs-identifier hs-var">ApOf</span></a></span><span> </span><span id="local-6989586621679080548"><span class="annot"><span class="annottext">Ap (Factor f) a
</span><a href="#local-6989586621679080548"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ap (Factor f) a -&gt; Free f a
forall (f :: * -&gt; *) a. Functor f =&gt; Ap (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewAp"><span class="hs-identifier hs-var">reviewAp</span></a></span><span> </span><span class="annot"><span class="annottext">Ap (Factor f) a
</span><a href="#local-6989586621679080548"><span class="hs-identifier hs-var">fas</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span id="local-6989586621679080203"><span id="local-6989586621679080204"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#viewAp"><span class="hs-identifier hs-type">viewAp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080203"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080204"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080203"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080204"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-88"></span><span id="viewAp"><span class="annot"><span class="annottext">viewAp :: forall (f :: * -&gt; *) a. Free f a -&gt; Ap (Factor f) a
</span><a href="Control.Alternative.Free.Lawless.html#viewAp"><span class="hs-identifier hs-var hs-var">viewAp</span></a></span></span><span> </span><span id="local-6989586621679080549"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080549"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080549"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-type">FreeLift</span></a></span><span> </span><span id="local-6989586621679080550"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080550"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Factor f a -&gt; Ap (Factor f) a
forall (f :: * -&gt; *) a. f a -&gt; Ap f a
</span><span class="hs-identifier hs-var">liftAp</span></span><span> </span><span class="annot"><span class="annottext">(Factor f a -&gt; Ap (Factor f) a)
-&gt; (f a -&gt; Factor f a) -&gt; f a -&gt; Ap (Factor f) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Either (f a) (NotOne (Summand f a)) -&gt; Factor f a
forall (f :: * -&gt; *) a.
Either (f a) (NotOne (Summand f a)) -&gt; Factor f a
</span><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-var">Factor</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (f a) (NotOne (Summand f a)) -&gt; Factor f a)
-&gt; (f a -&gt; Either (f a) (NotOne (Summand f a)))
-&gt; f a
-&gt; Factor f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">f a -&gt; Either (f a) (NotOne (Summand f a))
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(f a -&gt; Ap (Factor f) a) -&gt; f a -&gt; Ap (Factor f) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080550"><span class="hs-identifier hs-var">fa</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-type">FreeSumOf'</span></a></span><span> </span><span id="local-6989586621679080552"><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080552"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Factor f a -&gt; Ap (Factor f) a
forall (f :: * -&gt; *) a. f a -&gt; Ap f a
</span><span class="hs-identifier hs-var">liftAp</span></span><span> </span><span class="annot"><span class="annottext">(Factor f a -&gt; Ap (Factor f) a)
-&gt; (NotOne (Summand f a) -&gt; Factor f a)
-&gt; NotOne (Summand f a)
-&gt; Ap (Factor f) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Either (f a) (NotOne (Summand f a)) -&gt; Factor f a
forall (f :: * -&gt; *) a.
Either (f a) (NotOne (Summand f a)) -&gt; Factor f a
</span><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-var">Factor</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (f a) (NotOne (Summand f a)) -&gt; Factor f a)
-&gt; (NotOne (Summand f a) -&gt; Either (f a) (NotOne (Summand f a)))
-&gt; NotOne (Summand f a)
-&gt; Factor f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a) -&gt; Either (f a) (NotOne (Summand f a))
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(NotOne (Summand f a) -&gt; Ap (Factor f) a)
-&gt; NotOne (Summand f a) -&gt; Ap (Factor f) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080552"><span class="hs-identifier hs-var">fas</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-type">FreeApOf'</span></a></span><span> </span><span id="local-6989586621679080553"><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080553"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a -&gt; Ap (Factor f) a
forall (f :: * -&gt; *) a. Ap' f a -&gt; Ap f a
</span><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier hs-var">toAp</span></a></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080553"><span class="hs-identifier hs-var">fas</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span id="local-6989586621679080196"><span id="local-6989586621679080197"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#reviewAp"><span class="hs-identifier hs-type">reviewAp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679080196"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080196"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080197"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080196"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080197"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-94"></span><span id="reviewAp"><span class="annot"><span class="annottext">reviewAp :: forall (f :: * -&gt; *) a. Functor f =&gt; Ap (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#reviewAp"><span class="hs-identifier hs-var hs-var">reviewAp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Factor f a -&gt; Free f a)
-&gt; (Ap' (Factor f) a -&gt; Free f a)
-&gt; Either (Factor f a) (Ap' (Factor f) a)
-&gt; Free f a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">Factor f a -&gt; Free f a
forall (f :: * -&gt; *) a. Factor f a -&gt; Free f a
</span><a href="#local-6989586621679080556"><span class="hs-identifier hs-var">injectFactor</span></a></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a -&gt; Free f a
forall (f :: * -&gt; *) a. Ap' (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-var">FreeApOf'</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (Factor f a) (Ap' (Factor f) a) -&gt; Free f a)
-&gt; (Ap (Factor f) a -&gt; Either (Factor f a) (Ap' (Factor f) a))
-&gt; Ap (Factor f) a
-&gt; Free f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ap (Factor f) a -&gt; Either (Factor f a) (Ap' (Factor f) a)
forall (f :: * -&gt; *) a.
Functor f =&gt;
Ap f a -&gt; Either (f a) (Ap' f a)
</span><a href="Control.Alternative.Free.Lawless.html#notOneAp"><span class="hs-identifier hs-var">notOneAp</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-96"></span><span>    </span><span id="local-6989586621679080294"><span id="local-6989586621679080295"><span class="annot"><a href="#local-6989586621679080556"><span class="hs-identifier hs-type">injectFactor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080294"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080295"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080294"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080295"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621679080556"><span class="annot"><span class="annottext">injectFactor :: forall (f :: * -&gt; *) a. Factor f a -&gt; Free f a
</span><a href="#local-6989586621679080556"><span class="hs-identifier hs-var hs-var">injectFactor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f a -&gt; Free f a)
-&gt; (NotOne (Summand f a) -&gt; Free f a)
-&gt; Either (f a) (NotOne (Summand f a))
-&gt; Free f a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">f a -&gt; Free f a
forall (f :: * -&gt; *) a. f a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-var">FreeLift</span></a></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a) -&gt; Free f a
forall (f :: * -&gt; *) a. NotOne (Summand f a) -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-var">FreeSumOf'</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (f a) (NotOne (Summand f a)) -&gt; Free f a)
-&gt; (Factor f a -&gt; Either (f a) (NotOne (Summand f a)))
-&gt; Factor f a
-&gt; Free f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Factor f a -&gt; Either (f a) (NotOne (Summand f a))
forall (f :: * -&gt; *) a.
Factor f a -&gt; Either (f a) (NotOne (Summand f a))
</span><a href="Control.Alternative.Free.Lawless.html#runFactor"><span class="hs-identifier hs-var">runFactor</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-comment">-- | Subexpressions of @Free f a@ which cannot be written as</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- nontrivial sum @x '&lt;|&gt;' y@.</span><span>
</span><span id="line-101"></span><span class="hs-keyword">newtype</span><span> </span><span id="Summand"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-var">Summand</span></a></span></span><span> </span><span id="local-6989586621679080258"><span class="annot"><a href="#local-6989586621679080258"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679080259"><span class="annot"><a href="#local-6989586621679080259"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Summand"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-var">Summand</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runSummand"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Summand f a -&gt; Either (f a) (Ap' (Factor f) a)
</span><a href="Control.Alternative.Free.Lawless.html#runSummand"><span class="hs-identifier hs-var hs-var">runSummand</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679080258"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080259"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080258"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080259"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679080560"><span id="local-6989586621679080566"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Summand f a -&gt; Summand f b)
-&gt; (forall a b. a -&gt; Summand f b -&gt; Summand f a)
-&gt; Functor (Summand f)
forall a b. a -&gt; Summand f b -&gt; Summand f a
forall a b. (a -&gt; b) -&gt; Summand f a -&gt; Summand f b
forall (f :: * -&gt; *) a b.
Functor f =&gt;
a -&gt; Summand f b -&gt; Summand f a
forall (f :: * -&gt; *) a b.
Functor f =&gt;
(a -&gt; b) -&gt; Summand f a -&gt; Summand f b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
(a -&gt; b) -&gt; Summand f a -&gt; Summand f b
fmap :: forall a b. (a -&gt; b) -&gt; Summand f a -&gt; Summand f b
$c&lt;$ :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
a -&gt; Summand f b -&gt; Summand f a
&lt;$ :: forall a b. a -&gt; Summand f b -&gt; Summand f a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="FFunctor.Lift1.html#Lift1"><span class="hs-identifier hs-type">Lift1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FCompose</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080258"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679080584"><span class="annot"><span class="annottext">(forall (f :: * -&gt; *). Functor f =&gt; Functor (Summand f)) =&gt;
(forall (g :: * -&gt; *) (h :: * -&gt; *) x.
 (Functor g, Functor h) =&gt;
 (g ~&gt; h) -&gt; Summand g x -&gt; Summand h x)
-&gt; FFunctor Summand
forall (f :: * -&gt; *). Functor f =&gt; Functor (Summand f)
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Summand g x -&gt; Summand h x
forall (ff :: FF).
(forall (g :: * -&gt; *). Functor g =&gt; Functor (ff g)) =&gt;
(forall (g :: * -&gt; *) (h :: * -&gt; *) x.
 (Functor g, Functor h) =&gt;
 (g ~&gt; h) -&gt; ff g x -&gt; ff h x)
-&gt; FFunctor ff
$cffmap :: forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Summand g x -&gt; Summand h x
ffmap :: forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Summand g x -&gt; Summand h x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">FFunctor</span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="FFunctor.Lift1.html#Lift1"><span class="hs-identifier hs-type">Lift1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FCompose</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">-- | Subexpressions of @Free f a@ which cannot be written as</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- nontrivial apply @x '&lt;*&gt;' y@.</span><span>
</span><span id="line-107"></span><span class="hs-keyword">newtype</span><span> </span><span id="Factor"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-var">Factor</span></a></span></span><span> </span><span id="local-6989586621679080288"><span class="annot"><a href="#local-6989586621679080288"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679080289"><span class="annot"><a href="#local-6989586621679080289"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Factor"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-var">Factor</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runFactor"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Factor f a -&gt; Either (f a) (NotOne (Summand f a))
</span><a href="Control.Alternative.Free.Lawless.html#runFactor"><span class="hs-identifier hs-var hs-var">runFactor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679080288"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080289"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NotOne</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080288"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080289"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679080599"><span id="local-6989586621679080604"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Factor f a -&gt; Factor f b)
-&gt; (forall a b. a -&gt; Factor f b -&gt; Factor f a)
-&gt; Functor (Factor f)
forall a b. a -&gt; Factor f b -&gt; Factor f a
forall a b. (a -&gt; b) -&gt; Factor f a -&gt; Factor f b
forall (f :: * -&gt; *) a b.
Functor f =&gt;
a -&gt; Factor f b -&gt; Factor f a
forall (f :: * -&gt; *) a b.
Functor f =&gt;
(a -&gt; b) -&gt; Factor f a -&gt; Factor f b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
(a -&gt; b) -&gt; Factor f a -&gt; Factor f b
fmap :: forall a b. (a -&gt; b) -&gt; Factor f a -&gt; Factor f b
$c&lt;$ :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
a -&gt; Factor f b -&gt; Factor f a
&lt;$ :: forall a b. a -&gt; Factor f b -&gt; Factor f a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="FFunctor.Lift1.html#Lift1"><span class="hs-identifier hs-type">Lift1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FFunctor.Tannen.html#Tannen"><span class="hs-identifier hs-type">Tannen</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NotOne</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679080288"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679080620"><span class="annot"><span class="annottext">(forall (f :: * -&gt; *). Functor f =&gt; Functor (Factor f)) =&gt;
(forall (g :: * -&gt; *) (h :: * -&gt; *) x.
 (Functor g, Functor h) =&gt;
 (g ~&gt; h) -&gt; Factor g x -&gt; Factor h x)
-&gt; FFunctor Factor
forall (f :: * -&gt; *). Functor f =&gt; Functor (Factor f)
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Factor g x -&gt; Factor h x
forall (ff :: FF).
(forall (g :: * -&gt; *). Functor g =&gt; Functor (ff g)) =&gt;
(forall (g :: * -&gt; *) (h :: * -&gt; *) x.
 (Functor g, Functor h) =&gt;
 (g ~&gt; h) -&gt; ff g x -&gt; ff h x)
-&gt; FFunctor ff
$cffmap :: forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Factor g x -&gt; Factor h x
ffmap :: forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Factor g x -&gt; Factor h x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">FFunctor</span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="FFunctor.Lift1.html#Lift1"><span class="hs-identifier hs-type">Lift1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FFunctor.Tannen.html#Tannen"><span class="hs-identifier hs-type">Tannen</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NotOne</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span id="local-6989586621679080241"><span id="local-6989586621679080242"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#liftFree"><span class="hs-identifier hs-type">liftFree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679080241"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080242"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080241"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080242"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-112"></span><span id="liftFree"><span class="annot"><span class="annottext">liftFree :: forall (f :: * -&gt; *) a. f a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#liftFree"><span class="hs-identifier hs-var hs-var">liftFree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f a -&gt; Free f a
forall (f :: * -&gt; *) a. f a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-var">FreeLift</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#hoistFree"><span class="hs-identifier hs-type">hoistFree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080230"><span class="annot"><a href="#local-6989586621679080230"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679080231"><span class="annot"><a href="#local-6989586621679080231"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679080232"><span class="annot"><a href="#local-6989586621679080232"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080228"><span class="annot"><a href="#local-6989586621679080228"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679080230"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080228"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080231"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080228"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080230"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080232"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080231"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080232"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-115"></span><span id="hoistFree"><span class="annot"><span class="annottext">hoistFree :: forall (f :: * -&gt; *) (g :: * -&gt; *) a.
(forall x. f x -&gt; g x) -&gt; Free f a -&gt; Free g a
</span><a href="Control.Alternative.Free.Lawless.html#hoistFree"><span class="hs-identifier hs-var hs-var">hoistFree</span></a></span></span><span> </span><span id="local-6989586621679080632"><span class="annot"><span class="annottext">forall x. f x -&gt; g x
</span><a href="#local-6989586621679080632"><span class="hs-identifier hs-var">fg</span></a></span></span><span> </span><span id="local-6989586621679080633"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080633"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080633"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-type">FreeLift</span></a></span><span> </span><span id="local-6989586621679080634"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080634"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">g a -&gt; Free g a
forall (f :: * -&gt; *) a. f a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-var">FreeLift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f a -&gt; g a
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080632"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080634"><span class="hs-identifier hs-var">fa</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-type">FreeSumOf'</span></a></span><span> </span><span id="local-6989586621679080635"><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080635"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NotOne (Summand g a) -&gt; Free g a
forall (f :: * -&gt; *) a. NotOne (Summand f a) -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-var">FreeSumOf'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Summand f a -&gt; Summand g a)
-&gt; NotOne (Summand f a) -&gt; NotOne (Summand g a)
forall a b. (a -&gt; b) -&gt; NotOne a -&gt; NotOne b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Summand f a -&gt; Summand g a
forall b. Summand f b -&gt; Summand g b
</span><a href="#local-6989586621679080636"><span class="hs-identifier hs-var">goSummand</span></a></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080635"><span class="hs-identifier hs-var">fas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-type">FreeApOf'</span></a></span><span> </span><span id="local-6989586621679080637"><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080637"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ap' (Factor g) a -&gt; Free g a
forall (f :: * -&gt; *) a. Ap' (Factor f) a -&gt; Free f a
</span><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-var">FreeApOf'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. Factor f x -&gt; Factor g x)
-&gt; Ap' (Factor f) a -&gt; Ap' (Factor g) a
forall (f :: * -&gt; *) (g :: * -&gt; *) a.
(forall x. f x -&gt; g x) -&gt; Ap' f a -&gt; Ap' g a
</span><a href="Control.Alternative.Free.Lawless.html#hoistAp%27"><span class="hs-identifier hs-var">hoistAp'</span></a></span><span> </span><span class="annot"><span class="annottext">Factor f x -&gt; Factor g x
forall x. Factor f x -&gt; Factor g x
</span><a href="#local-6989586621679080639"><span class="hs-identifier hs-var">goFactor</span></a></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080637"><span class="hs-identifier hs-var">fas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><a href="#local-6989586621679080636"><span class="hs-identifier hs-type">goSummand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080348"><span class="annot"><a href="#local-6989586621679080348"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080230"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080348"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080231"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080348"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621679080636"><span class="annot"><span class="annottext">goSummand :: forall b. Summand f b -&gt; Summand g b
</span><a href="#local-6989586621679080636"><span class="hs-identifier hs-var hs-var">goSummand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either (g b) (Ap' (Factor g) b) -&gt; Summand g b
forall (f :: * -&gt; *) a.
Either (f a) (Ap' (Factor f) a) -&gt; Summand f a
</span><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-var">Summand</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (g b) (Ap' (Factor g) b) -&gt; Summand g b)
-&gt; (Summand f b -&gt; Either (g b) (Ap' (Factor g) b))
-&gt; Summand f b
-&gt; Summand g b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(f b -&gt; g b)
-&gt; (Ap' (Factor f) b -&gt; Ap' (Factor g) b)
-&gt; Either (f b) (Ap' (Factor f) b)
-&gt; Either (g b) (Ap' (Factor g) b)
forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; Either a c -&gt; Either b d
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">f b -&gt; g b
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080632"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. Factor f x -&gt; Factor g x)
-&gt; Ap' (Factor f) b -&gt; Ap' (Factor g) b
forall (f :: * -&gt; *) (g :: * -&gt; *) a.
(forall x. f x -&gt; g x) -&gt; Ap' f a -&gt; Ap' g a
</span><a href="Control.Alternative.Free.Lawless.html#hoistAp%27"><span class="hs-identifier hs-var">hoistAp'</span></a></span><span> </span><span class="annot"><span class="annottext">Factor f x -&gt; Factor g x
forall x. Factor f x -&gt; Factor g x
</span><a href="#local-6989586621679080639"><span class="hs-identifier hs-var">goFactor</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (f b) (Ap' (Factor f) b)
 -&gt; Either (g b) (Ap' (Factor g) b))
-&gt; (Summand f b -&gt; Either (f b) (Ap' (Factor f) b))
-&gt; Summand f b
-&gt; Either (g b) (Ap' (Factor g) b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Summand f b -&gt; Either (f b) (Ap' (Factor f) b)
forall (f :: * -&gt; *) a.
Summand f a -&gt; Either (f a) (Ap' (Factor f) a)
</span><a href="Control.Alternative.Free.Lawless.html#runSummand"><span class="hs-identifier hs-var">runSummand</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="#local-6989586621679080639"><span class="hs-identifier hs-type">goFactor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080643"><span class="annot"><a href="#local-6989586621679080643"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080230"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080643"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080231"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080643"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span id="local-6989586621679080639"><span class="annot"><span class="annottext">goFactor :: forall x. Factor f x -&gt; Factor g x
</span><a href="#local-6989586621679080639"><span class="hs-identifier hs-var hs-var">goFactor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either (g b) (NotOne (Summand g b)) -&gt; Factor g b
forall (f :: * -&gt; *) a.
Either (f a) (NotOne (Summand f a)) -&gt; Factor f a
</span><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-var">Factor</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (g b) (NotOne (Summand g b)) -&gt; Factor g b)
-&gt; (Factor f b -&gt; Either (g b) (NotOne (Summand g b)))
-&gt; Factor f b
-&gt; Factor g b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(f b -&gt; g b)
-&gt; (NotOne (Summand f b) -&gt; NotOne (Summand g b))
-&gt; Either (f b) (NotOne (Summand f b))
-&gt; Either (g b) (NotOne (Summand g b))
forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; Either a c -&gt; Either b d
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">f b -&gt; g b
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080632"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Summand f b -&gt; Summand g b)
-&gt; NotOne (Summand f b) -&gt; NotOne (Summand g b)
forall a b. (a -&gt; b) -&gt; NotOne a -&gt; NotOne b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Summand f b -&gt; Summand g b
forall b. Summand f b -&gt; Summand g b
</span><a href="#local-6989586621679080636"><span class="hs-identifier hs-var">goSummand</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (f b) (NotOne (Summand f b))
 -&gt; Either (g b) (NotOne (Summand g b)))
-&gt; (Factor f b -&gt; Either (f b) (NotOne (Summand f b)))
-&gt; Factor f b
-&gt; Either (g b) (NotOne (Summand g b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Factor f b -&gt; Either (f b) (NotOne (Summand f b))
forall (f :: * -&gt; *) a.
Factor f a -&gt; Either (f a) (NotOne (Summand f a))
</span><a href="Control.Alternative.Free.Lawless.html#runFactor"><span class="hs-identifier hs-var">runFactor</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#foldFree"><span class="hs-identifier hs-type">foldFree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080248"><span class="annot"><a href="#local-6989586621679080248"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679080247"><span class="annot"><a href="#local-6989586621679080247"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679080249"><span class="annot"><a href="#local-6989586621679080249"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="annot"><a href="#local-6989586621679080247"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080245"><span class="annot"><a href="#local-6989586621679080245"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679080248"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080245"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080247"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080245"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080248"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080247"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080249"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-127"></span><span id="foldFree"><span class="annot"><span class="annottext">foldFree :: forall (f :: * -&gt; *) (g :: * -&gt; *) a.
Alternative g =&gt;
(forall x. f x -&gt; g x) -&gt; Free f a -&gt; g a
</span><a href="Control.Alternative.Free.Lawless.html#foldFree"><span class="hs-identifier hs-var hs-var">foldFree</span></a></span></span><span> </span><span id="local-6989586621679080653"><span class="annot"><span class="annottext">forall x. f x -&gt; g x
</span><a href="#local-6989586621679080653"><span class="hs-identifier hs-var">fg</span></a></span></span><span> </span><span id="local-6989586621679080654"><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080654"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Free f a
</span><a href="#local-6989586621679080654"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeLift"><span class="hs-identifier hs-type">FreeLift</span></a></span><span> </span><span id="local-6989586621679080655"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080655"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a -&gt; g a
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080653"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080655"><span class="hs-identifier hs-var">fa</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeSumOf%27"><span class="hs-identifier hs-type">FreeSumOf'</span></a></span><span> </span><span id="local-6989586621679080656"><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080656"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NotOne (g a) -&gt; g a
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Foldable t, Alternative f) =&gt;
t (f a) -&gt; f a
</span><span class="hs-identifier hs-var">asum</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Summand f a -&gt; g a
forall b. Summand f b -&gt; g b
</span><a href="#local-6989586621679080657"><span class="hs-identifier hs-var">goSummand</span></a></span><span> </span><span class="annot"><span class="annottext">(Summand f a -&gt; g a) -&gt; NotOne (Summand f a) -&gt; NotOne (g a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NotOne (Summand f a)
</span><a href="#local-6989586621679080656"><span class="hs-identifier hs-var">fas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#FreeApOf%27"><span class="hs-identifier hs-type">FreeApOf'</span></a></span><span> </span><span id="local-6989586621679080659"><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080659"><span class="hs-identifier hs-var">fas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(forall x. Factor f x -&gt; g x) -&gt; Ap (Factor f) a -&gt; g a
forall (g :: * -&gt; *) (f :: * -&gt; *) a.
Applicative g =&gt;
(forall x. f x -&gt; g x) -&gt; Ap f a -&gt; g a
</span><span class="hs-identifier hs-var">runAp</span></span><span> </span><span class="annot"><span class="annottext">Factor f x -&gt; g x
forall x. Factor f x -&gt; g x
</span><a href="#local-6989586621679080661"><span class="hs-identifier hs-var">goFactor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ap' (Factor f) a -&gt; Ap (Factor f) a
forall (f :: * -&gt; *) a. Ap' f a -&gt; Ap f a
</span><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier hs-var">toAp</span></a></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) a
</span><a href="#local-6989586621679080659"><span class="hs-identifier hs-var">fas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="#local-6989586621679080657"><span class="hs-identifier hs-type">goSummand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080369"><span class="annot"><a href="#local-6989586621679080369"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Summand"><span class="hs-identifier hs-type">Summand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080248"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080247"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080369"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span id="local-6989586621679080657"><span class="annot"><span class="annottext">goSummand :: forall b. Summand f b -&gt; g b
</span><a href="#local-6989586621679080657"><span class="hs-identifier hs-var hs-var">goSummand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f b -&gt; g b)
-&gt; (Ap' (Factor f) b -&gt; g b)
-&gt; Either (f b) (Ap' (Factor f) b)
-&gt; g b
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">f b -&gt; g b
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080653"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. Factor f x -&gt; g x) -&gt; Ap (Factor f) b -&gt; g b
forall (g :: * -&gt; *) (f :: * -&gt; *) a.
Applicative g =&gt;
(forall x. f x -&gt; g x) -&gt; Ap f a -&gt; g a
</span><span class="hs-identifier hs-var">runAp</span></span><span> </span><span class="annot"><span class="annottext">Factor f x -&gt; g x
forall x. Factor f x -&gt; g x
</span><a href="#local-6989586621679080661"><span class="hs-identifier hs-var">goFactor</span></a></span><span> </span><span class="annot"><span class="annottext">(Ap (Factor f) b -&gt; g b)
-&gt; (Ap' (Factor f) b -&gt; Ap (Factor f) b) -&gt; Ap' (Factor f) b -&gt; g b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ap' (Factor f) b -&gt; Ap (Factor f) b
forall (f :: * -&gt; *) a. Ap' f a -&gt; Ap f a
</span><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier hs-var">toAp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (f b) (Ap' (Factor f) b) -&gt; g b)
-&gt; (Summand f b -&gt; Either (f b) (Ap' (Factor f) b))
-&gt; Summand f b
-&gt; g b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Summand f b -&gt; Either (f b) (Ap' (Factor f) b)
forall (f :: * -&gt; *) a.
Summand f a -&gt; Either (f a) (Ap' (Factor f) a)
</span><a href="Control.Alternative.Free.Lawless.html#runSummand"><span class="hs-identifier hs-var">runSummand</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="#local-6989586621679080661"><span class="hs-identifier hs-type">goFactor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080663"><span class="annot"><a href="#local-6989586621679080663"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Factor"><span class="hs-identifier hs-type">Factor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080248"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080663"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080247"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080663"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621679080661"><span class="annot"><span class="annottext">goFactor :: forall x. Factor f x -&gt; g x
</span><a href="#local-6989586621679080661"><span class="hs-identifier hs-var hs-var">goFactor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f b -&gt; g b)
-&gt; (NotOne (Summand f b) -&gt; g b)
-&gt; Either (f b) (NotOne (Summand f b))
-&gt; g b
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">f b -&gt; g b
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080653"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NotOne (g b) -&gt; g b
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Foldable t, Alternative f) =&gt;
t (f a) -&gt; f a
</span><span class="hs-identifier hs-var">asum</span></span><span> </span><span class="annot"><span class="annottext">(NotOne (g b) -&gt; g b)
-&gt; (NotOne (Summand f b) -&gt; NotOne (g b))
-&gt; NotOne (Summand f b)
-&gt; g b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Summand f b -&gt; g b) -&gt; NotOne (Summand f b) -&gt; NotOne (g b)
forall a b. (a -&gt; b) -&gt; NotOne a -&gt; NotOne b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Summand f b -&gt; g b
forall b. Summand f b -&gt; g b
</span><a href="#local-6989586621679080657"><span class="hs-identifier hs-var">goSummand</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (f b) (NotOne (Summand f b)) -&gt; g b)
-&gt; (Factor f b -&gt; Either (f b) (NotOne (Summand f b)))
-&gt; Factor f b
-&gt; g b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Factor f b -&gt; Either (f b) (NotOne (Summand f b))
forall (f :: * -&gt; *) a.
Factor f a -&gt; Either (f a) (NotOne (Summand f a))
</span><a href="Control.Alternative.Free.Lawless.html#runFactor"><span class="hs-identifier hs-var">runFactor</span></a></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="annot"><span class="hs-comment">-- * Aux</span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | Free Applicative @'Ap' f a@ but @'liftAp' fa@, is excluded.</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- @'Ap' f a@ uses zero or more values of @f _@,</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- but @Ap' f a@ uses either none (`Pure'`) or 2+ times (`ApMany'`).</span><span>
</span><span id="line-144"></span><span class="hs-keyword">data</span><span> </span><span id="Ap%27"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-var">Ap'</span></a></span></span><span> </span><span id="local-6989586621679080670"><span class="annot"><a href="#local-6989586621679080670"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679080671"><span class="annot"><a href="#local-6989586621679080671"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679080387"><span id="local-6989586621679080388"><span id="Pure%27"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Pure%27"><span class="hs-identifier hs-var">Pure'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679080387"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080388"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080387"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-146"></span><span>  </span><span id="local-6989586621679080391"><span id="local-6989586621679080394"><span id="local-6989586621679080672"><span id="local-6989586621679080673"><span id="ApMany%27"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#ApMany%27"><span class="hs-identifier hs-var">ApMany'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679080391"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080672"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080391"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080673"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="annot"><a href="#local-6989586621679080391"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679080673"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080672"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080394"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080391"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080394"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621679080180"><span id="local-6989586621679080676"><span id="local-6989586621679080678"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679080180"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080180"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FFunctor</span></span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621679080684"><span class="annot"><span class="annottext">ffmap :: forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Ap' g x -&gt; Ap' h x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ffmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. g x -&gt; h x) -&gt; Ap' g x -&gt; Ap' h x
forall (f :: * -&gt; *) (g :: * -&gt; *) a.
(forall x. f x -&gt; g x) -&gt; Ap' f a -&gt; Ap' g a
</span><a href="Control.Alternative.Free.Lawless.html#hoistAp%27"><span class="hs-identifier hs-var">hoistAp'</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span id="local-6989586621679080350"><span id="local-6989586621679080351"><span id="local-6989586621679080352"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#hoistAp%27"><span class="hs-identifier hs-type">hoistAp'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679080349"><span class="annot"><a href="#local-6989586621679080349"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679080350"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080349"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679080351"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080349"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080350"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080352"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080351"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080352"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-154"></span><span id="hoistAp%27"><span class="annot"><span class="annottext">hoistAp' :: forall (f :: * -&gt; *) (g :: * -&gt; *) a.
(forall x. f x -&gt; g x) -&gt; Ap' f a -&gt; Ap' g a
</span><a href="Control.Alternative.Free.Lawless.html#hoistAp%27"><span class="hs-identifier hs-var hs-var">hoistAp'</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall x. f x -&gt; g x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Pure%27"><span class="hs-identifier hs-type">Pure'</span></a></span><span> </span><span id="local-6989586621679080685"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679080685"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Ap' g a
forall a (f :: * -&gt; *). a -&gt; Ap' f a
</span><a href="Control.Alternative.Free.Lawless.html#Pure%27"><span class="hs-identifier hs-var">Pure'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679080685"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-155"></span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#hoistAp%27"><span class="hs-identifier hs-var">hoistAp'</span></a></span><span> </span><span id="local-6989586621679080686"><span class="annot"><span class="annottext">forall x. f x -&gt; g x
</span><a href="#local-6989586621679080686"><span class="hs-identifier hs-var">fg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#ApMany%27"><span class="hs-identifier hs-type">ApMany'</span></a></span><span> </span><span id="local-6989586621679080687"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080687"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span id="local-6989586621679080688"><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621679080688"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span id="local-6989586621679080689"><span class="annot"><span class="annottext">Ap f (b -&gt; a -&gt; a)
</span><a href="#local-6989586621679080689"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g a -&gt; g b -&gt; Ap g (b -&gt; a -&gt; a) -&gt; Ap' g a
forall (f :: * -&gt; *) a b c.
f a -&gt; f b -&gt; Ap f (b -&gt; a -&gt; c) -&gt; Ap' f c
</span><a href="Control.Alternative.Free.Lawless.html#ApMany%27"><span class="hs-identifier hs-var">ApMany'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f a -&gt; g a
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080686"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080687"><span class="hs-identifier hs-var">fa</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f b -&gt; g b
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080686"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621679080688"><span class="hs-identifier hs-var">fb</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. f x -&gt; g x) -&gt; Ap f (b -&gt; a -&gt; a) -&gt; Ap g (b -&gt; a -&gt; a)
forall (f :: * -&gt; *) (g :: * -&gt; *) b.
(forall a. f a -&gt; g a) -&gt; Ap f b -&gt; Ap g b
</span><span class="hs-identifier hs-var">hoistAp</span></span><span> </span><span class="annot"><span class="annottext">f a -&gt; g a
forall x. f x -&gt; g x
</span><a href="#local-6989586621679080686"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">Ap f (b -&gt; a -&gt; a)
</span><a href="#local-6989586621679080689"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span id="local-6989586621679080290"><span id="local-6989586621679080291"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier hs-type">toAp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080290"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080291"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="annot"><a href="#local-6989586621679080290"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080291"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-158"></span><span id="toAp"><span class="annot"><span class="annottext">toAp :: forall (f :: * -&gt; *) a. Ap' f a -&gt; Ap f a
</span><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier hs-var hs-var">toAp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Pure%27"><span class="hs-identifier hs-type">Pure'</span></a></span><span> </span><span id="local-6989586621679080691"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679080691"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Ap f a
forall a (f :: * -&gt; *). a -&gt; Ap f a
</span><span class="hs-identifier hs-var">Pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679080691"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-159"></span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#toAp"><span class="hs-identifier hs-var">toAp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#ApMany%27"><span class="hs-identifier hs-type">ApMany'</span></a></span><span> </span><span id="local-6989586621679080693"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080693"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span id="local-6989586621679080694"><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621679080694"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span id="local-6989586621679080695"><span class="annot"><span class="annottext">Ap f (b -&gt; a -&gt; a)
</span><a href="#local-6989586621679080695"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f a -&gt; Ap f (a -&gt; a) -&gt; Ap f a
forall (f :: * -&gt; *) a1 a. f a1 -&gt; Ap f (a1 -&gt; a) -&gt; Ap f a
</span><span class="hs-identifier hs-var">Ap</span></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679080693"><span class="hs-identifier hs-var">fa</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f b -&gt; Ap f (b -&gt; a -&gt; a) -&gt; Ap f (a -&gt; a)
forall (f :: * -&gt; *) a1 a. f a1 -&gt; Ap f (a1 -&gt; a) -&gt; Ap f a
</span><span class="hs-identifier hs-var">Ap</span></span><span> </span><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621679080694"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="annot"><span class="annottext">Ap f (b -&gt; a -&gt; a)
</span><a href="#local-6989586621679080695"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span id="local-6989586621679080296"><span id="local-6989586621679080297"><span class="annot"><a href="Control.Alternative.Free.Lawless.html#notOneAp"><span class="hs-identifier hs-type">notOneAp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679080296"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="annot"><a href="#local-6989586621679080296"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080297"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679080296"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080297"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#Ap%27"><span class="hs-identifier hs-type">Ap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080296"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679080297"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-162"></span><span id="notOneAp"><span class="annot"><span class="annottext">notOneAp :: forall (f :: * -&gt; *) a.
Functor f =&gt;
Ap f a -&gt; Either (f a) (Ap' f a)
</span><a href="Control.Alternative.Free.Lawless.html#notOneAp"><span class="hs-identifier hs-var hs-var">notOneAp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679080697"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679080697"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ap' f a -&gt; Either (f a) (Ap' f a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Ap' f a
forall a (f :: * -&gt; *). a -&gt; Ap' f a
</span><a href="Control.Alternative.Free.Lawless.html#Pure%27"><span class="hs-identifier hs-var">Pure'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679080697"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#notOneAp"><span class="hs-identifier hs-var">notOneAp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span id="local-6989586621679080699"><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679080699"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679080700"><span class="annot"><span class="annottext">a1 -&gt; a
</span><a href="#local-6989586621679080700"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f a -&gt; Either (f a) (Ap' f a)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a1 -&gt; a
</span><a href="#local-6989586621679080700"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(a1 -&gt; a) -&gt; f a1 -&gt; f a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679080699"><span class="hs-identifier hs-var">fa</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="annot"><a href="Control.Alternative.Free.Lawless.html#notOneAp"><span class="hs-identifier hs-var">notOneAp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span id="local-6989586621679080701"><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679080701"><span class="hs-identifier hs-var">fa</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span id="local-6989586621679080702"><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679080702"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span id="local-6989586621679080703"><span class="annot"><span class="annottext">Ap f (a1 -&gt; a1 -&gt; a)
</span><a href="#local-6989586621679080703"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ap' f a -&gt; Either (f a) (Ap' f a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f a1 -&gt; f a1 -&gt; Ap f (a1 -&gt; a1 -&gt; a) -&gt; Ap' f a
forall (f :: * -&gt; *) a b c.
f a -&gt; f b -&gt; Ap f (b -&gt; a -&gt; c) -&gt; Ap' f c
</span><a href="Control.Alternative.Free.Lawless.html#ApMany%27"><span class="hs-identifier hs-var">ApMany'</span></a></span><span> </span><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679080701"><span class="hs-identifier hs-var">fa</span></a></span><span> </span><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679080702"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="annot"><span class="annottext">Ap f (a1 -&gt; a1 -&gt; a)
</span><a href="#local-6989586621679080703"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span></pre></body></html>