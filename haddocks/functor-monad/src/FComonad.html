<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="annot"><span class="hs-comment">-- | Comonads in the cateogory of @Functor@s.</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">FComonad</span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator">(~&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="FFunctor.html#FFunctor"><span class="hs-identifier">FFunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier">FComonad</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="FComonad.html#fduplicate"><span class="hs-identifier">fduplicate</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad</span></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Product</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Compose</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor.Sum</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bi</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad.Trans.Identity</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad.Env</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">EnvT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad.Traced</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TracedT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad.Cofree</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Cofree</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad.Cofree</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cofree</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FFunctor.html"><span class="hs-identifier">FFunctor</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="annot"><span class="hs-comment">-- | @FComonad@ is to 'FFunctor' what 'Comonad' is to 'Functor'.</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="FFunctor.html#FFunctor"><span class="hs-identifier hs-type">FFunctor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128747"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="FComonad"><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-var">FComonad</span></a></span></span><span> </span><span id="local-6989586621679128747"><span class="annot"><a href="#local-6989586621679128747"><span class="hs-identifier hs-type">ff</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-34"></span><span>    </span><span id="fextract"><span class="annot"><a href="FComonad.html#fextract"><span class="hs-identifier hs-type">fextract</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679128763"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679128763"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128747"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128763"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128763"><span class="hs-identifier hs-type">g</span></a></span></span><span>
</span><span id="line-35"></span><span>    </span><span id="fextend"><span class="annot"><a href="FComonad.html#fextend"><span class="hs-identifier hs-type">fextend</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679128758"><span id="local-6989586621679128759"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679128758"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679128759"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128747"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128758"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128759"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128747"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128758"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128747"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128759"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span id="local-6989586621679128750"><span id="local-6989586621679128751"><span class="annot"><a href="FComonad.html#fduplicate"><span class="hs-identifier hs-type">fduplicate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128750"><span class="hs-identifier hs-type">ff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679128751"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128750"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128751"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128750"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128750"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128751"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-38"></span><span id="fduplicate"><span class="annot"><span class="annottext">fduplicate :: forall (ff :: FF) (g :: * -&gt; *).
(FComonad ff, Functor g) =&gt;
ff g ~&gt; ff (ff g)
</span><a href="FComonad.html#fduplicate"><span class="hs-identifier hs-var hs-var">fduplicate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ff g ~&gt; ff g) -&gt; ff g ~&gt; ff (ff g)
forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
forall (ff :: FF) (g :: * -&gt; *) (h :: * -&gt; *).
(FComonad ff, Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var">fextend</span></a></span><span> </span><span class="annot"><span class="annottext">ff g x -&gt; ff g x
forall a. a -&gt; a
ff g ~&gt; ff g
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IdentityT</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>    </span><span id="local-6989586621679128910"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; IdentityT g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdentityT g x -&gt; g x
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-42"></span><span>    </span><span id="local-6989586621679128914"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(IdentityT g ~&gt; h) -&gt; IdentityT g ~&gt; IdentityT h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679128915"><span class="annot"><span class="annottext">IdentityT g ~&gt; h
</span><a href="#local-6989586621679128915"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">h x -&gt; IdentityT h x
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(h x -&gt; IdentityT h x)
-&gt; (IdentityT g x -&gt; h x) -&gt; IdentityT g x -&gt; IdentityT h x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">IdentityT g x -&gt; h x
IdentityT g ~&gt; h
</span><a href="#local-6989586621679128915"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128777"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679128777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Product</span></span><span> </span><span class="annot"><a href="#local-6989586621679128777"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-45"></span><span>    </span><span id="local-6989586621679128925"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; Product f g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pair</span></span><span> </span><span class="annot"><span class="annottext">f x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128927"><span class="annot"><span class="annottext">g x
</span><a href="#local-6989586621679128927"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g x
</span><a href="#local-6989586621679128927"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span id="local-6989586621679128930"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(Product f g ~&gt; h) -&gt; Product f g ~&gt; Product f h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679128931"><span class="annot"><span class="annottext">Product f g ~&gt; h
</span><a href="#local-6989586621679128931"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679128932"><span class="annot"><span class="annottext">fg :: Product f g x
</span><a href="#local-6989586621679128932"><span class="hs-identifier hs-var">fg</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pair</span></span><span> </span><span id="local-6989586621679128933"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679128933"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">g x
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f x -&gt; h x -&gt; Product f h x
forall {k} (f :: k -&gt; *) (g :: k -&gt; *) (a :: k).
f a -&gt; g a -&gt; Product f g a
</span><span class="hs-identifier hs-var">Pair</span></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679128933"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Product f g x -&gt; h x
Product f g ~&gt; h
</span><a href="#local-6989586621679128931"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Product f g x
</span><a href="#local-6989586621679128932"><span class="hs-identifier hs-var">fg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128792"><span class="annot"><span class="hs-identifier hs-type">Comonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679128792"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Compose</span></span><span> </span><span class="annot"><a href="#local-6989586621679128792"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-49"></span><span>    </span><span id="local-6989586621679128945"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; Compose f g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (g x) -&gt; g x
forall a. f a -&gt; a
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><span class="hs-identifier hs-var">extract</span></span><span> </span><span class="annot"><span class="annottext">(f (g x) -&gt; g x)
-&gt; (Compose f g x -&gt; f (g x)) -&gt; Compose f g x -&gt; g x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Compose f g x -&gt; f (g x)
forall {k1} {k2} (f :: k1 -&gt; *) (g :: k2 -&gt; k1) (a :: k2).
Compose f g a -&gt; f (g a)
</span><span class="hs-identifier hs-var">getCompose</span></span><span>
</span><span id="line-50"></span><span>    </span><span id="local-6989586621679128951"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(Compose f g ~&gt; h) -&gt; Compose f g ~&gt; Compose f h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679128952"><span class="annot"><span class="annottext">Compose f g ~&gt; h
</span><a href="#local-6989586621679128952"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (h x) -&gt; Compose f h x
forall {k} {k1} (f :: k -&gt; *) (g :: k1 -&gt; k) (a :: k1).
f (g a) -&gt; Compose f g a
</span><span class="hs-identifier hs-var">Compose</span></span><span> </span><span class="annot"><span class="annottext">(f (h x) -&gt; Compose f h x)
-&gt; (Compose f g x -&gt; f (h x)) -&gt; Compose f g x -&gt; Compose f h x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(f (g x) -&gt; h x) -&gt; f (g x) -&gt; f (h x)
forall a b. (f a -&gt; b) -&gt; f a -&gt; f b
forall (w :: * -&gt; *) a b. Comonad w =&gt; (w a -&gt; b) -&gt; w a -&gt; w b
</span><span class="hs-identifier hs-var">extend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compose f g x -&gt; h x
Compose f g ~&gt; h
</span><a href="#local-6989586621679128952"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Compose f g x -&gt; h x)
-&gt; (f (g x) -&gt; Compose f g x) -&gt; f (g x) -&gt; h x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">f (g x) -&gt; Compose f g x
forall {k} {k1} (f :: k -&gt; *) (g :: k1 -&gt; k) (a :: k1).
f (g a) -&gt; Compose f g a
</span><span class="hs-identifier hs-var">Compose</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(f (g x) -&gt; f (h x))
-&gt; (Compose f g x -&gt; f (g x)) -&gt; Compose f g x -&gt; f (h x)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Compose f g x -&gt; f (g x)
forall {k1} {k2} (f :: k1 -&gt; *) (g :: k2 -&gt; k1) (a :: k2).
Compose f g a -&gt; f (g a)
</span><span class="hs-identifier hs-var">getCompose</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128816"><span id="local-6989586621679128817"><span class="hs-special">(</span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128816"><span class="hs-identifier hs-type">ff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128817"><span class="hs-identifier hs-type">gg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bi.Sum</span></span><span> </span><span class="annot"><a href="#local-6989586621679128816"><span class="hs-identifier hs-type">ff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128817"><span class="hs-identifier hs-type">gg</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-53"></span><span>    </span><span id="local-6989586621679128970"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; Sum ff gg g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bi.L2</span></span><span> </span><span id="local-6989586621679128972"><span class="annot"><span class="annottext">ff g x
</span><a href="#local-6989586621679128972"><span class="hs-identifier hs-var">ffx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ff g x -&gt; g x
ff g ~&gt; g
forall (g :: * -&gt; *). Functor g =&gt; ff g ~&gt; g
forall (ff :: FF) (g :: * -&gt; *).
(FComonad ff, Functor g) =&gt;
ff g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var">fextract</span></a></span><span> </span><span class="annot"><span class="annottext">ff g x
</span><a href="#local-6989586621679128972"><span class="hs-identifier hs-var">ffx</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="FComonad.html#fextract"><span class="hs-identifier hs-var">fextract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bi.R2</span></span><span> </span><span id="local-6989586621679128974"><span class="annot"><span class="annottext">gg g x
</span><a href="#local-6989586621679128974"><span class="hs-identifier hs-var">ggx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">gg g x -&gt; g x
gg g ~&gt; g
forall (g :: * -&gt; *). Functor g =&gt; gg g ~&gt; g
forall (ff :: FF) (g :: * -&gt; *).
(FComonad ff, Functor g) =&gt;
ff g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var">fextract</span></a></span><span> </span><span class="annot"><span class="annottext">gg g x
</span><a href="#local-6989586621679128974"><span class="hs-identifier hs-var">ggx</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>    </span><span id="local-6989586621679128983"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(Sum ff gg g ~&gt; h) -&gt; Sum ff gg g ~&gt; Sum ff gg h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679128984"><span class="annot"><span class="annottext">Sum ff gg g ~&gt; h
</span><a href="#local-6989586621679128984"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679128985"><span class="annot"><span class="annottext">Sum ff gg g x
</span><a href="#local-6989586621679128985"><span class="hs-identifier hs-var">ffgg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Sum ff gg g x
</span><a href="#local-6989586621679128985"><span class="hs-identifier hs-var">ffgg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-57"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Bi.L2</span></span><span> </span><span id="local-6989586621679128986"><span class="annot"><span class="annottext">ff g x
</span><a href="#local-6989586621679128986"><span class="hs-identifier hs-var">ffx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ff h x -&gt; Sum ff gg h x
forall {k} {k1} (p :: k -&gt; k1 -&gt; *) (q :: k -&gt; k1 -&gt; *) (a :: k)
       (b :: k1).
p a b -&gt; Sum p q a b
</span><span class="hs-identifier hs-var">Bi.L2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
forall (ff :: FF) (g :: * -&gt; *) (h :: * -&gt; *).
(FComonad ff, Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var">fextend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sum ff gg g x -&gt; h x
Sum ff gg g ~&gt; h
</span><a href="#local-6989586621679128984"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Sum ff gg g x -&gt; h x)
-&gt; (ff g x -&gt; Sum ff gg g x) -&gt; ff g x -&gt; h x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ff g x -&gt; Sum ff gg g x
forall {k} {k1} (p :: k -&gt; k1 -&gt; *) (q :: k -&gt; k1 -&gt; *) (a :: k)
       (b :: k1).
p a b -&gt; Sum p q a b
</span><span class="hs-identifier hs-var">Bi.L2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ff g x
</span><a href="#local-6989586621679128986"><span class="hs-identifier hs-var">ffx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Bi.R2</span></span><span> </span><span id="local-6989586621679128987"><span class="annot"><span class="annottext">gg g x
</span><a href="#local-6989586621679128987"><span class="hs-identifier hs-var">ggx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">gg h x -&gt; Sum ff gg h x
forall {k} {k1} (p :: k -&gt; k1 -&gt; *) (q :: k -&gt; k1 -&gt; *) (a :: k)
       (b :: k1).
q a b -&gt; Sum p q a b
</span><span class="hs-identifier hs-var">Bi.R2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(gg g ~&gt; h) -&gt; gg g ~&gt; gg h
forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(gg g ~&gt; h) -&gt; gg g ~&gt; gg h
forall (ff :: FF) (g :: * -&gt; *) (h :: * -&gt; *).
(FComonad ff, Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var">fextend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sum ff gg g x -&gt; h x
Sum ff gg g ~&gt; h
</span><a href="#local-6989586621679128984"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Sum ff gg g x -&gt; h x)
-&gt; (gg g x -&gt; Sum ff gg g x) -&gt; gg g x -&gt; h x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">gg g x -&gt; Sum ff gg g x
forall {k} {k1} (p :: k -&gt; k1 -&gt; *) (q :: k -&gt; k1 -&gt; *) (a :: k)
       (b :: k1).
q a b -&gt; Sum p q a b
</span><span class="hs-identifier hs-var">Bi.R2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">gg g x
</span><a href="#local-6989586621679128987"><span class="hs-identifier hs-var">ggx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128833"><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EnvT</span></span><span> </span><span class="annot"><a href="#local-6989586621679128833"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-61"></span><span>  </span><span id="local-6989586621679128995"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; EnvT e g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EnvT</span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128997"><span class="annot"><span class="annottext">g x
</span><a href="#local-6989586621679128997"><span class="hs-identifier hs-var">gx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g x
</span><a href="#local-6989586621679128997"><span class="hs-identifier hs-var">gx</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span id="local-6989586621679129000"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(EnvT e g ~&gt; h) -&gt; EnvT e g ~&gt; EnvT e h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679129001"><span class="annot"><span class="annottext">EnvT e g ~&gt; h
</span><a href="#local-6989586621679129001"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679129002"><span class="annot"><span class="annottext">eg :: EnvT e g x
</span><a href="#local-6989586621679129002"><span class="hs-identifier hs-var">eg</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EnvT</span></span><span> </span><span id="local-6989586621679129003"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679129003"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">g x
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">e -&gt; h x -&gt; EnvT e h x
forall e (w :: * -&gt; *) a. e -&gt; w a -&gt; EnvT e w a
</span><span class="hs-identifier hs-var">EnvT</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679129003"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnvT e g x -&gt; h x
EnvT e g ~&gt; h
</span><a href="#local-6989586621679129001"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">EnvT e g x
</span><a href="#local-6989586621679129002"><span class="hs-identifier hs-var">eg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128846"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679128846"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TracedT</span></span><span> </span><span class="annot"><a href="#local-6989586621679128846"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621679129016"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; TracedT m g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TracedT</span></span><span> </span><span id="local-6989586621679129018"><span class="annot"><span class="annottext">g (m -&gt; x)
</span><a href="#local-6989586621679129018"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m -&gt; x) -&gt; m -&gt; x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((m -&gt; x) -&gt; x) -&gt; g (m -&gt; x) -&gt; g x
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">g (m -&gt; x)
</span><a href="#local-6989586621679129018"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621679129024"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(TracedT m g ~&gt; h) -&gt; TracedT m g ~&gt; TracedT m h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679129025"><span class="annot"><span class="annottext">TracedT m g ~&gt; h
</span><a href="#local-6989586621679129025"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TracedT</span></span><span> </span><span id="local-6989586621679129026"><span class="annot"><span class="annottext">g (m -&gt; x)
</span><a href="#local-6989586621679129026"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">h (m -&gt; x) -&gt; TracedT m h x
forall m (w :: * -&gt; *) a. w (m -&gt; a) -&gt; TracedT m w a
</span><span class="hs-identifier hs-var">TracedT</span></span><span> </span><span class="annot"><span class="annottext">(h (m -&gt; x) -&gt; TracedT m h x) -&gt; h (m -&gt; x) -&gt; TracedT m h x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TracedT m g (m -&gt; x) -&gt; h (m -&gt; x)
TracedT m g ~&gt; h
</span><a href="#local-6989586621679129025"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">g (m -&gt; m -&gt; x) -&gt; TracedT m g (m -&gt; x)
forall m (w :: * -&gt; *) a. w (m -&gt; a) -&gt; TracedT m w a
</span><span class="hs-identifier hs-var">TracedT</span></span><span> </span><span class="annot"><span class="annottext">(g (m -&gt; m -&gt; x) -&gt; TracedT m g (m -&gt; x))
-&gt; g (m -&gt; m -&gt; x) -&gt; TracedT m g (m -&gt; x)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((m -&gt; x) -&gt; m -&gt; m -&gt; x) -&gt; g (m -&gt; x) -&gt; g (m -&gt; m -&gt; x)
forall a b. (a -&gt; b) -&gt; g a -&gt; g b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679129027"><span class="annot"><span class="annottext">m -&gt; x
</span><a href="#local-6989586621679129027"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679129028"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679129028"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621679129029"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679129029"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m -&gt; x
</span><a href="#local-6989586621679129027"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679129028"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679129029"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">g (m -&gt; x)
</span><a href="#local-6989586621679129026"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="FComonad.html#FComonad"><span class="hs-identifier hs-type">FComonad</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cofree</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="FComonad.html#fextract"><span class="hs-identifier hs-type">fextract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679129036"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679129036"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cofree</span></span><span> </span><span class="annot"><a href="#local-6989586621679129036"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129036"><span class="hs-identifier hs-type">g</span></a></span></span><span>
</span><span id="line-70"></span><span>  </span><span id="local-6989586621679129045"><span class="annot"><span class="annottext">fextract :: forall (g :: * -&gt; *). Functor g =&gt; Cofree g ~&gt; g
</span><a href="FComonad.html#fextract"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Cofree g x -&gt; x) -&gt; g (Cofree g x) -&gt; g x
forall a b. (a -&gt; b) -&gt; g a -&gt; g b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Cofree g x -&gt; x
forall a. Cofree g a -&gt; a
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><span class="hs-identifier hs-var">extract</span></span><span> </span><span class="annot"><span class="annottext">(g (Cofree g x) -&gt; g x)
-&gt; (Cofree g x -&gt; g (Cofree g x)) -&gt; Cofree g x -&gt; g x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Cofree g x -&gt; g (Cofree g x)
forall a. Cofree g a -&gt; g (Cofree g a)
forall (f :: * -&gt; *) (w :: * -&gt; *) a.
ComonadCofree f w =&gt;
w a -&gt; f (w a)
</span><span class="hs-identifier hs-var">Cofree.unwrap</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="FComonad.html#fextend"><span class="hs-identifier hs-type">fextend</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679129047"><span id="local-6989586621679129048"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679129047"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679129048"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Cofree</span></span><span> </span><span class="annot"><a href="#local-6989586621679129047"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129048"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Cofree</span></span><span> </span><span class="annot"><a href="#local-6989586621679129047"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="FFunctor.html#~%3E"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cofree</span></span><span> </span><span class="annot"><a href="#local-6989586621679129048"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-73"></span><span>  </span><span id="local-6989586621679129060"><span class="annot"><span class="annottext">fextend :: forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(Cofree g ~&gt; h) -&gt; Cofree g ~&gt; Cofree h
</span><a href="FComonad.html#fextend"><span class="hs-identifier hs-var hs-var hs-var hs-var">fextend</span></a></span></span><span> </span><span id="local-6989586621679129061"><span class="annot"><span class="annottext">Cofree g ~&gt; h
</span><a href="#local-6989586621679129061"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Cofree g ~&gt; h) -&gt; Cofree (Cofree g) x -&gt; Cofree h x
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; Cofree g x -&gt; Cofree h x
forall (ff :: FF) (g :: * -&gt; *) (h :: * -&gt; *) x.
(FFunctor ff, Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ff g x -&gt; ff h x
</span><a href="FFunctor.html#ffmap"><span class="hs-identifier hs-var">ffmap</span></a></span><span> </span><span class="annot"><span class="annottext">Cofree g x -&gt; h x
Cofree g ~&gt; h
</span><a href="#local-6989586621679129061"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(Cofree (Cofree g) x -&gt; Cofree h x)
-&gt; (Cofree g x -&gt; Cofree (Cofree g) x) -&gt; Cofree g x -&gt; Cofree h x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Cofree g x -&gt; Cofree (Cofree g) x
forall (f :: * -&gt; *) a. Comonad f =&gt; f a -&gt; Cofree f a
</span><span class="hs-identifier hs-var">Cofree.section</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-comment">{-
  
  fextract $ fduplicate gs
    = fextract $ extract gs :&lt; fmap fduplicate_ (duplicate gs)
    = fmap extract (fmap fduplicate_ (duplicate gs))
    = fmap (extract . fduplicate_) (duplicate gs)
    = fmap extract (duplicate gs)
    = gs
  
  ffmap fextract $ fduplicate gs
    = ffmap fextract $ extract gs :&lt; fmap fduplicate_ (duplicate gs)
    = extract gs :&lt; (fmap (ffmap fextract) . fextract . fmap fduplicate_) (duplicate gs)
    = extract gs :&lt; (fmap (ffmap fextract . fduplicate_) . fextract) (duplicate gs)
      -- gs = (a :&lt; gs')
    = extract (a :&lt; gs') :&lt; fmap (ffmap fextract . fduplicate_) (fextract (duplicate (a :&lt; gs')))
    = a :&lt; fmap (ffmap fextract . fduplicate_) (fextract ((a :&lt; gs') :&lt; fmap duplicate gs'))
    = a :&lt; fmap (ffmap fextract . fduplicate_) (fmap extract (fmap duplicate gs'))
    = a :&lt; fmap (ffmap fextract . fduplicate_) gs'
  ffmap fextract . fduplicate_
    = let go (a :&lt; gs) = a :&lt; fmap go gs
       in go
    = id
  
  -}</span><span>
</span><span id="line-99"></span></pre></body></html>