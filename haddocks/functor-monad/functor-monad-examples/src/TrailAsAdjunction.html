<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="annot"><span class="hs-comment">-- | Explain 'Control.Monad.Trail.Trail' monad in terms of adjoint functors</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">TrailAsAdjunction</span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Building blocks</span></span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><span class="hs-identifier">Const</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier">Pair</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier">Shape</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier">Emptied</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier">Y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier">&#915;</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#mapPair"><span class="hs-identifier">mapPair</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#mapShape"><span class="hs-identifier">mapShape</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#mapEmptied"><span class="hs-identifier">mapEmptied</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#mapY"><span class="hs-identifier">mapY</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#map%393"><span class="hs-identifier">map&#915;</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Adjunctions</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-comment">-- $adjunction_diagrams</span></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunctPairShape"><span class="hs-identifier">adjunctPairShape</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunctPairShape%27"><span class="hs-identifier">adjunctPairShape'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunctShapeConst"><span class="hs-identifier">adjunctShapeConst</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunctShapeConst%27"><span class="hs-identifier">adjunctShapeConst'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunctConstEmptied"><span class="hs-identifier">adjunctConstEmptied</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunctConstEmptied%27"><span class="hs-identifier">adjunctConstEmptied'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunct%393Y"><span class="hs-identifier">adjunct&#915;Y</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#adjunct%393Y%27"><span class="hs-identifier">adjunct&#915;Y'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Monads and Comonads from these adjunctions</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier">J0</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier">K1</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier">J1</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier">RR</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Examples</span></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-comment">-- $doc_example</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="TrailAsAdjunction.html#R"><span class="hs-identifier">R</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Bifunctor</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Const</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ap</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">FFunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FFunctor</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(~&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">FMonad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FMonad</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">FComonad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FComonad</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><span class="hs-comment">{- $adjunction_diagrams

There is a chain of three adjunctions between @Type@ and @Functor@

&gt;                    Type
&gt;   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;      |            ^          |            ^
&gt;      |            |          |            |
&gt; Pair |  -|  Shape | -| Const | -| Emptied | 
&gt;      |            |          |            |
&gt;      v            |          v            |
&gt;   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;                   Functor

And an adjunction between @Type^op@ and @Functor@

&gt;       Type^op
&gt;   ~~~~~~~~~~~~~~~~
&gt;      ^      |
&gt;      |      |
&gt;    &#915; |  -|  | Y
&gt;      |      |
&gt;      |      v
&gt;   ~~~~~~~~~~~~~~~~
&gt;      Functor

-}</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="annot"><span class="hs-comment">{- $doc_example

'J0' and 'J1' turn an @FMonad mm@ to a @Monad@. The following table shows what is the
@Monad@ they make for each @FMonad@.

+-----------+-------------+--------------------+-------------------+------------+------------+
| @mm@      | @Compose m@ | @Precompose m@     | @Sum f@           | @Free@     | @FreeT' m@ |
+===========+=============+====================+===================+============+============+
| @'J0' mm@ | @m@         | @Identity@         | @Either (f Void)@ | @Identity@ | @m@        |
+-----------+-------------+--------------------+-------------------+------------+------------+
| @'J1' mm@ | @m@         | @Writer (Ap m ())@ | @Either (f ())@   | @[]@       | @ListT m@  |
+-----------+-------------+--------------------+-------------------+------------+------------+

'K1' takes an @FComonad ww@ and turns them a @Comonad@. 'RR' takes an @FComonad ww@ and turns
them a @Monad@, instead of @Comonad@.

+-----------+-------------+--------------------+-------------------+------------+---------------------+
| @ww@      | @Compose w@ | @Precompose w@     | @Product f@       | @Cofree@   | @Sum ff gg@         |
+===========+=============+====================+===================+============+=====================+
| @'K1' ww@ | @w@         | @Identity@         | @Env (f ())@      | @Identity@ | @K1 ff :+: K1 gg@   |
+-----------+-------------+--------------------+-------------------+------------+---------------------+
| @'RR' ww@ | @Co w@      | @R w@              | @Exp1 f Identity@ | @[]@       | ??                  |
+-----------+-------------+--------------------+-------------------+------------+---------------------+

Where

- 'Control.Monad.Co.Co' is a @Monad@ defined in &quot;Control.Monad.Co&quot; from kan-extensions package
- 'R' is a @Monad@ defined below
- 'Data.Functor.Exp.Exp1' is defined in &quot;Data.Functor.Exp&quot;

-}</span></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">-- * Building blocks</span></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="annot"><span class="hs-comment">-- | @Pair :: Type -&gt; Functor@</span></span><span>
</span><span id="line-114"></span><span class="hs-keyword">type</span><span> </span><span id="Pair"><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621679075651"><span id="local-6989586621679075652"><span class="annot"><a href="TrailAsAdjunction.html#mapPair"><span class="hs-identifier hs-type">mapPair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075651"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075652"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075651"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075652"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-117"></span><span id="mapPair"><span class="annot"><span class="annottext">mapPair :: forall a b. (a -&gt; b) -&gt; Pair a ~&gt; Pair b
</span><a href="TrailAsAdjunction.html#mapPair"><span class="hs-identifier hs-var hs-var">mapPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (a, x) -&gt; (b, x)
forall a b c. (a -&gt; b) -&gt; (a, c) -&gt; (b, c)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-comment">-- | Yoneda embedding</span><span>
</span><span id="line-120"></span><span class="hs-comment">--</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- @Y :: Type^op -&gt; Functor@</span><span>
</span><span id="line-122"></span><span class="hs-keyword">type</span><span> </span><span id="Y"><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier hs-var">Y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span id="local-6989586621679075663"><span id="local-6989586621679075664"><span class="annot"><a href="TrailAsAdjunction.html#mapY"><span class="hs-identifier hs-type">mapY</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075663"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075664"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075664"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075663"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-125"></span><span id="mapY"><span class="annot"><span class="annottext">mapY :: forall a b. (a -&gt; b) -&gt; Y b ~&gt; Y a
</span><a href="TrailAsAdjunction.html#mapY"><span class="hs-identifier hs-var hs-var">mapY</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Y b x -&gt; (a -&gt; b) -&gt; Y a x) -&gt; (a -&gt; b) -&gt; Y b x -&gt; Y a x
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Y b x -&gt; (a -&gt; b) -&gt; Y a x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">(.)</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><span class="hs-comment">-- | @Emptied :: Functor -&gt; Type@</span></span><span>
</span><span id="line-128"></span><span class="hs-keyword">newtype</span><span> </span><span id="Emptied"><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-var">Emptied</span></a></span></span><span> </span><span id="local-6989586621679075675"><span class="annot"><a href="#local-6989586621679075675"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Emptied"><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-var">Emptied</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getEmptied"><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Emptied f -&gt; f Void
</span><a href="TrailAsAdjunction.html#getEmptied"><span class="hs-identifier hs-var hs-var">getEmptied</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679075675"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span id="local-6989586621679075678"><span id="local-6989586621679075679"><span class="annot"><a href="TrailAsAdjunction.html#mapEmptied"><span class="hs-identifier hs-type">mapEmptied</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075678"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075679"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-type">Emptied</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075678"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-type">Emptied</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075679"><span class="hs-identifier hs-type">g</span></a></span></span></span><span>
</span><span id="line-131"></span><span id="mapEmptied"><span class="annot"><span class="annottext">mapEmptied :: forall (f :: * -&gt; *) (g :: * -&gt; *).
(f ~&gt; g) -&gt; Emptied f -&gt; Emptied g
</span><a href="TrailAsAdjunction.html#mapEmptied"><span class="hs-identifier hs-var hs-var">mapEmptied</span></a></span></span><span> </span><span id="local-6989586621679075931"><span class="annot"><span class="annottext">f ~&gt; g
</span><a href="#local-6989586621679075931"><span class="hs-identifier hs-var">fg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-type">Emptied</span></a></span><span> </span><span id="local-6989586621679075932"><span class="annot"><span class="annottext">f Void
</span><a href="#local-6989586621679075932"><span class="hs-identifier hs-var">f0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g Void -&gt; Emptied g
forall (f :: * -&gt; *). f Void -&gt; Emptied f
</span><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-var">Emptied</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f Void -&gt; g Void
f ~&gt; g
</span><a href="#local-6989586621679075931"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">f Void
</span><a href="#local-6989586621679075932"><span class="hs-identifier hs-var">f0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="annot"><span class="hs-comment">-- | @Shape :: Functor -&gt; Type@</span></span><span>
</span><span id="line-134"></span><span class="hs-keyword">newtype</span><span> </span><span id="Shape"><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-var">Shape</span></a></span></span><span> </span><span id="local-6989586621679075682"><span class="annot"><a href="#local-6989586621679075682"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Shape"><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-var">Shape</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getShape"><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Shape f -&gt; f ()
</span><a href="TrailAsAdjunction.html#getShape"><span class="hs-identifier hs-var hs-var">getShape</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679075682"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span id="local-6989586621679075685"><span id="local-6989586621679075686"><span class="annot"><a href="TrailAsAdjunction.html#mapShape"><span class="hs-identifier hs-type">mapShape</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075685"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075686"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075685"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075686"><span class="hs-identifier hs-type">g</span></a></span></span></span><span>
</span><span id="line-137"></span><span id="mapShape"><span class="annot"><span class="annottext">mapShape :: forall (f :: * -&gt; *) (g :: * -&gt; *). (f ~&gt; g) -&gt; Shape f -&gt; Shape g
</span><a href="TrailAsAdjunction.html#mapShape"><span class="hs-identifier hs-var hs-var">mapShape</span></a></span></span><span> </span><span id="local-6989586621679075935"><span class="annot"><span class="annottext">f ~&gt; g
</span><a href="#local-6989586621679075935"><span class="hs-identifier hs-var">fg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span id="local-6989586621679075936"><span class="annot"><span class="annottext">f ()
</span><a href="#local-6989586621679075936"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g () -&gt; Shape g
forall (f :: * -&gt; *). f () -&gt; Shape f
</span><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-var">Shape</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f () -&gt; g ()
f ~&gt; g
</span><a href="#local-6989586621679075935"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">f ()
</span><a href="#local-6989586621679075936"><span class="hs-identifier hs-var">f1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">-- | @&#915; :: Functor -&gt; Type^op@</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">newtype</span><span> </span><span id="%393"><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-var">&#915;</span></a></span></span><span> </span><span id="local-6989586621679075689"><span class="annot"><a href="#local-6989586621679075689"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="%393"><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-var">&#915;</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="get%393"><span class="annot"><span class="annottext">forall (f :: * -&gt; *). &#915; f -&gt; forall x. f x -&gt; x
</span><a href="TrailAsAdjunction.html#get%393"><span class="hs-identifier hs-var hs-var">get&#915;</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679075691"><span class="annot"><a href="#local-6989586621679075691"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679075689"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075691"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075691"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span id="local-6989586621679075694"><span id="local-6989586621679075695"><span class="annot"><a href="TrailAsAdjunction.html#map%393"><span class="hs-identifier hs-type">map&#915;</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075694"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075695"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-type">&#915;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075695"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-type">&#915;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075694"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-143"></span><span id="map%393"><span class="annot"><span class="annottext">map&#915; :: forall (f :: * -&gt; *) (g :: * -&gt; *). (f ~&gt; g) -&gt; &#915; g -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#map%393"><span class="hs-identifier hs-var hs-var">map&#915;</span></a></span></span><span> </span><span id="local-6989586621679075939"><span class="annot"><span class="annottext">f ~&gt; g
</span><a href="#local-6989586621679075939"><span class="hs-identifier hs-var">fg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-type">&#915;</span></a></span><span> </span><span id="local-6989586621679075940"><span class="annot"><span class="annottext">forall x. g x -&gt; x
</span><a href="#local-6989586621679075940"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. f x -&gt; x) -&gt; &#915; f
forall (f :: * -&gt; *). (forall x. f x -&gt; x) -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-var">&#915;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">g x -&gt; x
forall x. g x -&gt; x
</span><a href="#local-6989586621679075940"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(g x -&gt; x) -&gt; (f x -&gt; g x) -&gt; f x -&gt; x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">f x -&gt; g x
f ~&gt; g
</span><a href="#local-6989586621679075939"><span class="hs-identifier hs-var">fg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><span class="hs-comment">-- * Adjunctions</span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621679075699"><span id="local-6989586621679075700"><span class="annot"><a href="TrailAsAdjunction.html#adjunctPairShape"><span class="hs-identifier hs-type">adjunctPairShape</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075699"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075700"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075699"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075700"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-148"></span><span id="adjunctPairShape"><span class="annot"><span class="annottext">adjunctPairShape :: forall a (f :: * -&gt; *). (Pair a ~&gt; f) -&gt; a -&gt; Shape f
</span><a href="TrailAsAdjunction.html#adjunctPairShape"><span class="hs-identifier hs-var hs-var">adjunctPairShape</span></a></span></span><span> </span><span id="local-6989586621679075941"><span class="annot"><span class="annottext">Pair a ~&gt; f
</span><a href="#local-6989586621679075941"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679075942"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075942"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f () -&gt; Shape f
forall (f :: * -&gt; *). f () -&gt; Shape f
</span><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-var">Shape</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pair a () -&gt; f ()
Pair a ~&gt; f
</span><a href="#local-6989586621679075941"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075942"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621679075703"><span id="local-6989586621679075704"><span class="annot"><a href="TrailAsAdjunction.html#adjunctPairShape%27"><span class="hs-identifier hs-type">adjunctPairShape'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075703"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075704"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075703"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075704"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075703"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-151"></span><span id="adjunctPairShape%27"><span class="annot"><span class="annottext">adjunctPairShape' :: forall (f :: * -&gt; *) a. Functor f =&gt; (a -&gt; Shape f) -&gt; Pair a ~&gt; f
</span><a href="TrailAsAdjunction.html#adjunctPairShape%27"><span class="hs-identifier hs-var hs-var">adjunctPairShape'</span></a></span></span><span> </span><span id="local-6989586621679075945"><span class="annot"><span class="annottext">a -&gt; Shape f
</span><a href="#local-6989586621679075945"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679075946"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075946"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679075947"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679075947"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679075947"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; f () -&gt; f x
forall a b. a -&gt; f b -&gt; f a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">Shape f -&gt; f ()
forall (f :: * -&gt; *). Shape f -&gt; f ()
</span><a href="TrailAsAdjunction.html#getShape"><span class="hs-identifier hs-var">getShape</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Shape f
</span><a href="#local-6989586621679075945"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075946"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span id="local-6989586621679075711"><span id="local-6989586621679075712"><span class="annot"><a href="TrailAsAdjunction.html#adjunctShapeConst"><span class="hs-identifier hs-type">adjunctShapeConst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075711"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075711"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075712"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075711"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679075712"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-154"></span><span id="adjunctShapeConst"><span class="annot"><span class="annottext">adjunctShapeConst :: forall (f :: * -&gt; *) a. Functor f =&gt; (Shape f -&gt; a) -&gt; f ~&gt; Const a
</span><a href="TrailAsAdjunction.html#adjunctShapeConst"><span class="hs-identifier hs-var hs-var">adjunctShapeConst</span></a></span></span><span> </span><span id="local-6989586621679075951"><span class="annot"><span class="annottext">Shape f -&gt; a
</span><a href="#local-6989586621679075951"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679075952"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679075952"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Const a x
forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Const a x) -&gt; a -&gt; Const a x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Shape f -&gt; a
</span><a href="#local-6989586621679075951"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f () -&gt; Shape f
forall (f :: * -&gt; *). f () -&gt; Shape f
</span><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-var">Shape</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">() -&gt; f x -&gt; f ()
forall a b. a -&gt; f b -&gt; f a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679075952"><span class="hs-identifier hs-var">fb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span id="local-6989586621679075724"><span id="local-6989586621679075725"><span class="annot"><a href="TrailAsAdjunction.html#adjunctShapeConst%27"><span class="hs-identifier hs-type">adjunctShapeConst'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075724"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679075725"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075724"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075725"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-157"></span><span id="adjunctShapeConst%27"><span class="annot"><span class="annottext">adjunctShapeConst' :: forall (f :: * -&gt; *) a. (f ~&gt; Const a) -&gt; Shape f -&gt; a
</span><a href="TrailAsAdjunction.html#adjunctShapeConst%27"><span class="hs-identifier hs-var hs-var">adjunctShapeConst'</span></a></span></span><span> </span><span id="local-6989586621679075954"><span class="annot"><span class="annottext">f ~&gt; Const a
</span><a href="#local-6989586621679075954"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Shape"><span class="hs-identifier hs-type">Shape</span></a></span><span> </span><span id="local-6989586621679075955"><span class="annot"><span class="annottext">f ()
</span><a href="#local-6989586621679075955"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Const a () -&gt; a
forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">(Const a () -&gt; a) -&gt; Const a () -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">f () -&gt; Const a ()
f ~&gt; Const a
</span><a href="#local-6989586621679075954"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">f ()
</span><a href="#local-6989586621679075955"><span class="hs-identifier hs-var">f1</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="local-6989586621679075731"><span id="local-6989586621679075732"><span class="annot"><a href="TrailAsAdjunction.html#adjunctConstEmptied"><span class="hs-identifier hs-type">adjunctConstEmptied</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679075731"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075732"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075731"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-type">Emptied</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075732"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-160"></span><span id="adjunctConstEmptied"><span class="annot"><span class="annottext">adjunctConstEmptied :: forall a (f :: * -&gt; *). (Const a ~&gt; f) -&gt; a -&gt; Emptied f
</span><a href="TrailAsAdjunction.html#adjunctConstEmptied"><span class="hs-identifier hs-var hs-var">adjunctConstEmptied</span></a></span></span><span> </span><span id="local-6989586621679075957"><span class="annot"><span class="annottext">Const a ~&gt; f
</span><a href="#local-6989586621679075957"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679075958"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075958"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f Void -&gt; Emptied f
forall (f :: * -&gt; *). f Void -&gt; Emptied f
</span><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-var">Emptied</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Const a Void -&gt; f Void
Const a ~&gt; f
</span><a href="#local-6989586621679075957"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Const a Void
forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075958"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span id="local-6989586621679075735"><span id="local-6989586621679075736"><span class="annot"><a href="TrailAsAdjunction.html#adjunctConstEmptied%27"><span class="hs-identifier hs-type">adjunctConstEmptied'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075735"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075736"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Emptied"><span class="hs-identifier hs-type">Emptied</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075735"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679075736"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679075735"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-163"></span><span id="adjunctConstEmptied%27"><span class="annot"><span class="annottext">adjunctConstEmptied' :: forall (f :: * -&gt; *) a.
Functor f =&gt;
(a -&gt; Emptied f) -&gt; Const a ~&gt; f
</span><a href="TrailAsAdjunction.html#adjunctConstEmptied%27"><span class="hs-identifier hs-var hs-var">adjunctConstEmptied'</span></a></span></span><span> </span><span id="local-6989586621679075961"><span class="annot"><span class="annottext">a -&gt; Emptied f
</span><a href="#local-6989586621679075961"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span id="local-6989586621679075962"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075962"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f Void -&gt; f x
forall (f :: * -&gt; *) a. Functor f =&gt; f Void -&gt; f a
</span><span class="hs-identifier hs-var">vacuous</span></span><span> </span><span class="annot"><span class="annottext">(f Void -&gt; f x) -&gt; f Void -&gt; f x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Emptied f -&gt; f Void
forall (f :: * -&gt; *). Emptied f -&gt; f Void
</span><a href="TrailAsAdjunction.html#getEmptied"><span class="hs-identifier hs-var">getEmptied</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Emptied f
</span><a href="#local-6989586621679075961"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075962"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | @adjunct&#915;Y :: (&#915; f `'Control.Category.Op'` a) -&gt; (f ~&gt; Y a)@</span></span><span>
</span><span id="line-167"></span><span id="local-6989586621679075742"><span id="local-6989586621679075743"><span class="annot"><a href="TrailAsAdjunction.html#adjunct%393Y"><span class="hs-identifier hs-type">adjunct&#915;Y</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075742"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-type">&#915;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075743"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075743"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075742"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-168"></span><span id="adjunct%393Y"><span class="annot"><span class="annottext">adjunct&#915;Y :: forall a (f :: * -&gt; *). (a -&gt; &#915; f) -&gt; f ~&gt; Y a
</span><a href="TrailAsAdjunction.html#adjunct%393Y"><span class="hs-identifier hs-var hs-var">adjunct&#915;Y</span></a></span></span><span> </span><span id="local-6989586621679075964"><span class="annot"><span class="annottext">a -&gt; &#915; f
</span><a href="#local-6989586621679075964"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679075965"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679075965"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span id="local-6989586621679075966"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075966"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">&#915; f -&gt; forall x. f x -&gt; x
forall (f :: * -&gt; *). &#915; f -&gt; forall x. f x -&gt; x
</span><a href="TrailAsAdjunction.html#get%393"><span class="hs-identifier hs-var">get&#915;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; &#915; f
</span><a href="#local-6989586621679075964"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075966"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679075965"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="annot"><span class="hs-comment">-- | @adjunct&#915;Y' :: (f ~&gt; Y a) -&gt; (&#915; f `Control.Category.Op` a)@ </span></span><span>
</span><span id="line-171"></span><span id="local-6989586621679075747"><span id="local-6989586621679075748"><span class="annot"><a href="TrailAsAdjunction.html#adjunct%393Y%27"><span class="hs-identifier hs-type">adjunct&#915;Y'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075747"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075748"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075748"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-type">&#915;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075747"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-172"></span><span id="adjunct%393Y%27"><span class="annot"><span class="annottext">adjunct&#915;Y' :: forall (f :: * -&gt; *) a. (f ~&gt; Y a) -&gt; a -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#adjunct%393Y%27"><span class="hs-identifier hs-var hs-var">adjunct&#915;Y'</span></a></span></span><span> </span><span id="local-6989586621679075967"><span class="annot"><span class="annottext">f ~&gt; Y a
</span><a href="#local-6989586621679075967"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679075968"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075968"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall x. f x -&gt; x) -&gt; &#915; f
forall (f :: * -&gt; *). (forall x. f x -&gt; x) -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-var">&#915;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679075969"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679075969"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f x -&gt; Y a x
f ~&gt; Y a
</span><a href="#local-6989586621679075967"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679075969"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679075968"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><span class="hs-comment">-- * Monads and Comonads from these adjunctions</span></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="annot"><span class="hs-comment">-- | @J0 mm ~ Emptied &#8728; mm &#8728; Const@</span></span><span>
</span><span id="line-177"></span><span class="hs-keyword">newtype</span><span> </span><span id="J0"><span class="annot"><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-var">J0</span></a></span></span><span> </span><span id="local-6989586621679075752"><span class="annot"><a href="#local-6989586621679075752"><span class="hs-identifier hs-type">mm</span></a></span></span><span> </span><span id="local-6989586621679075753"><span class="annot"><a href="#local-6989586621679075753"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="J0"><span class="annot"><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-var">J0</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runJ0"><span class="annot"><span class="annottext">forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. J0 mm a -&gt; mm (Const a) Void
</span><a href="TrailAsAdjunction.html#runJ0"><span class="hs-identifier hs-var hs-var">runJ0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679075752"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679075753"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075761"><span id="local-6989586621679075974"><span class="annot"><span class="hs-identifier hs-type">FFunctor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075761"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-type">J0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075761"><span class="hs-identifier hs-type">mm</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679075982"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; J0 mm a -&gt; J0 mm b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679075983"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679075983"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">mm (Const b) Void -&gt; J0 mm b
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. mm (Const a) Void -&gt; J0 mm a
</span><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-var">J0</span></a></span><span> </span><span class="annot"><span class="annottext">(mm (Const b) Void -&gt; J0 mm b)
-&gt; (J0 mm a -&gt; mm (Const b) Void) -&gt; J0 mm a -&gt; J0 mm b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Const a ~&gt; Const b) -&gt; mm (Const a) Void -&gt; mm (Const b) Void
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; mm g x -&gt; mm h x
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *) x.
(FFunctor ff, Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ff g x -&gt; ff h x
</span><span class="hs-identifier hs-var">ffmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Const a x -&gt; Const b x
forall a b c. (a -&gt; b) -&gt; Const a c -&gt; Const b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679075983"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(mm (Const a) Void -&gt; mm (Const b) Void)
-&gt; (J0 mm a -&gt; mm (Const a) Void) -&gt; J0 mm a -&gt; mm (Const b) Void
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">J0 mm a -&gt; mm (Const a) Void
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. J0 mm a -&gt; mm (Const a) Void
</span><a href="TrailAsAdjunction.html#runJ0"><span class="hs-identifier hs-var">runJ0</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075784"><span id="local-6989586621679075994"><span id="local-6989586621679075998"><span id="local-6989586621679076001"><span class="annot"><span class="hs-identifier hs-type">FMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075784"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-type">J0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075784"><span class="hs-identifier hs-type">mm</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621679076007"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; J0 mm a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">mm (Const a) Void -&gt; J0 mm a
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. mm (Const a) Void -&gt; J0 mm a
</span><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-var">J0</span></a></span><span> </span><span class="annot"><span class="annottext">(mm (Const a) Void -&gt; J0 mm a)
-&gt; (a -&gt; mm (Const a) Void) -&gt; a -&gt; J0 mm a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Const a Void -&gt; mm (Const a) Void
Const a ~&gt; mm (Const a)
forall (g :: * -&gt; *). Functor g =&gt; g ~&gt; mm g
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *).
(FMonad ff, Functor g) =&gt;
g ~&gt; ff g
</span><span class="hs-identifier hs-var">fpure</span></span><span> </span><span class="annot"><span class="annottext">(Const a Void -&gt; mm (Const a) Void)
-&gt; (a -&gt; Const a Void) -&gt; a -&gt; mm (Const a) Void
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Const a Void
forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span>
</span><span id="line-184"></span><span>  </span><span id="local-6989586621679076011"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. J0 mm (a -&gt; b) -&gt; J0 mm a -&gt; J0 mm b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">J0 mm (a -&gt; b) -&gt; J0 mm a -&gt; J0 mm b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075787"><span id="local-6989586621679076017"><span id="local-6989586621679076020"><span class="annot"><span class="hs-identifier hs-type">FMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075787"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-type">J0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075787"><span class="hs-identifier hs-type">mm</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-187"></span><span>  </span><span id="local-6989586621679076029"><span class="annot"><span class="annottext">J0 mm a
</span><a href="#local-6989586621679076029"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span id="local-6989586621679076030"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. J0 mm a -&gt; (a -&gt; J0 mm b) -&gt; J0 mm b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621679076031"><span class="annot"><span class="annottext">a -&gt; J0 mm b
</span><a href="#local-6989586621679076031"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">mm (Const b) Void -&gt; J0 mm b
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. mm (Const a) Void -&gt; J0 mm a
</span><a href="TrailAsAdjunction.html#J0"><span class="hs-identifier hs-var">J0</span></a></span><span> </span><span class="annot"><span class="annottext">(mm (Const b) Void -&gt; J0 mm b) -&gt; mm (Const b) Void -&gt; J0 mm b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Const a ~&gt; mm (Const b)) -&gt; mm (Const a) Void -&gt; mm (Const b) Void
forall (g :: * -&gt; *) (h :: * -&gt; *) a.
(Functor g, Functor h) =&gt;
(g ~&gt; mm h) -&gt; mm g a -&gt; mm h a
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *) a.
(FMonad ff, Functor g, Functor h) =&gt;
(g ~&gt; ff h) -&gt; ff g a -&gt; ff h a
</span><span class="hs-identifier hs-var">fbind</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Emptied (mm (Const b))) -&gt; Const a ~&gt; mm (Const b)
forall (f :: * -&gt; *) a.
Functor f =&gt;
(a -&gt; Emptied f) -&gt; Const a ~&gt; f
</span><a href="TrailAsAdjunction.html#adjunctConstEmptied%27"><span class="hs-identifier hs-var">adjunctConstEmptied'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">J0 mm b -&gt; Emptied (mm (Const b))
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(J0 mm b -&gt; Emptied (mm (Const b)))
-&gt; (a -&gt; J0 mm b) -&gt; a -&gt; Emptied (mm (Const b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; J0 mm b
</span><a href="#local-6989586621679076031"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">J0 mm a -&gt; mm (Const a) Void
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. J0 mm a -&gt; mm (Const a) Void
</span><a href="TrailAsAdjunction.html#runJ0"><span class="hs-identifier hs-var">runJ0</span></a></span><span> </span><span class="annot"><span class="annottext">J0 mm a
</span><a href="#local-6989586621679076029"><span class="hs-identifier hs-var">ma</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="annot"><span class="hs-comment">-- | @K ww ~ Shape &#8728; ww &#8728; Const@ </span></span><span>
</span><span id="line-190"></span><span class="hs-keyword">newtype</span><span> </span><span id="K1"><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-var">K1</span></a></span></span><span> </span><span id="local-6989586621679075810"><span class="annot"><a href="#local-6989586621679075810"><span class="hs-identifier hs-type">ww</span></a></span></span><span> </span><span id="local-6989586621679075811"><span class="annot"><a href="#local-6989586621679075811"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="K1"><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-var">K1</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runK1"><span class="annot"><span class="annottext">forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. K1 ww a -&gt; ww (Const a) ()
</span><a href="TrailAsAdjunction.html#runK1"><span class="hs-identifier hs-var hs-var">runK1</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679075810"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="annot"><a href="#local-6989586621679075811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075816"><span id="local-6989586621679076039"><span class="annot"><span class="hs-identifier hs-type">FFunctor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075816"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075816"><span class="hs-identifier hs-type">ww</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>  </span><span id="local-6989586621679076045"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; K1 ww a -&gt; K1 ww b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679076046"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076046"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ww (Const b) () -&gt; K1 ww b
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. ww (Const a) () -&gt; K1 ww a
</span><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-var">K1</span></a></span><span> </span><span class="annot"><span class="annottext">(ww (Const b) () -&gt; K1 ww b)
-&gt; (K1 ww a -&gt; ww (Const b) ()) -&gt; K1 ww a -&gt; K1 ww b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Const a ~&gt; Const b) -&gt; ww (Const a) () -&gt; ww (Const b) ()
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ww g x -&gt; ww h x
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *) x.
(FFunctor ff, Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ff g x -&gt; ff h x
</span><span class="hs-identifier hs-var">ffmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Const a x -&gt; Const b x
forall a b c. (a -&gt; b) -&gt; Const a c -&gt; Const b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076046"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ww (Const a) () -&gt; ww (Const b) ())
-&gt; (K1 ww a -&gt; ww (Const a) ()) -&gt; K1 ww a -&gt; ww (Const b) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">K1 ww a -&gt; ww (Const a) ()
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. K1 ww a -&gt; ww (Const a) ()
</span><a href="TrailAsAdjunction.html#runK1"><span class="hs-identifier hs-var">runK1</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075829"><span id="local-6989586621679076054"><span class="annot"><span class="hs-identifier hs-type">FComonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075829"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Comonad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075829"><span class="hs-identifier hs-type">ww</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">extract</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679076062"><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075829"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076062"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076062"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-197"></span><span>  </span><span id="local-6989586621679076065"><span class="annot"><span class="annottext">extract :: forall a. K1 ww a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">extract</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Const a () -&gt; a
forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">(Const a () -&gt; a) -&gt; (K1 ww a -&gt; Const a ()) -&gt; K1 ww a -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ww (Const a) () -&gt; Const a ()
ww (Const a) ~&gt; Const a
forall (g :: * -&gt; *). Functor g =&gt; ww g ~&gt; g
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *).
(FComonad ff, Functor g) =&gt;
ff g ~&gt; g
</span><span class="hs-identifier hs-var">fextract</span></span><span> </span><span class="annot"><span class="annottext">(ww (Const a) () -&gt; Const a ())
-&gt; (K1 ww a -&gt; ww (Const a) ()) -&gt; K1 ww a -&gt; Const a ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">K1 ww a -&gt; ww (Const a) ()
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. K1 ww a -&gt; ww (Const a) ()
</span><a href="TrailAsAdjunction.html#runK1"><span class="hs-identifier hs-var">runK1</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">extend</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679076068"><span id="local-6989586621679076069"><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075829"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076068"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076069"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075829"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076068"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075829"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076069"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-200"></span><span>  </span><span id="local-6989586621679076073"><span class="annot"><span class="annottext">extend :: forall a b. (K1 ww a -&gt; b) -&gt; K1 ww a -&gt; K1 ww b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">extend</span></span></span><span> </span><span id="local-6989586621679076074"><span class="annot"><span class="annottext">K1 ww a -&gt; b
</span><a href="#local-6989586621679076074"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ww (Const b) () -&gt; K1 ww b
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. ww (Const a) () -&gt; K1 ww a
</span><a href="TrailAsAdjunction.html#K1"><span class="hs-identifier hs-var">K1</span></a></span><span> </span><span class="annot"><span class="annottext">(ww (Const b) () -&gt; K1 ww b)
-&gt; (K1 ww a -&gt; ww (Const b) ()) -&gt; K1 ww a -&gt; K1 ww b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ww (Const a) ~&gt; Const b) -&gt; ww (Const a) ~&gt; ww (Const b)
forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(ww g ~&gt; h) -&gt; ww g ~&gt; ww h
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *).
(FComonad ff, Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
</span><span class="hs-identifier hs-var">fextend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Shape (ww (Const a)) -&gt; b) -&gt; ww (Const a) ~&gt; Const b
forall (f :: * -&gt; *) a. Functor f =&gt; (Shape f -&gt; a) -&gt; f ~&gt; Const a
</span><a href="TrailAsAdjunction.html#adjunctShapeConst"><span class="hs-identifier hs-var">adjunctShapeConst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">K1 ww a -&gt; b
</span><a href="#local-6989586621679076074"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(K1 ww a -&gt; b)
-&gt; (Shape (ww (Const a)) -&gt; K1 ww a) -&gt; Shape (ww (Const a)) -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Shape (ww (Const a)) -&gt; K1 ww a
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="annot"><span class="annottext">(ww (Const a) () -&gt; ww (Const b) ())
-&gt; (K1 ww a -&gt; ww (Const a) ()) -&gt; K1 ww a -&gt; ww (Const b) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">K1 ww a -&gt; ww (Const a) ()
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. K1 ww a -&gt; ww (Const a) ()
</span><a href="TrailAsAdjunction.html#runK1"><span class="hs-identifier hs-var">runK1</span></a></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-- | @J1 mm ~ Emptied &#8728; mm &#8728; Const@</span><span>
</span><span id="line-203"></span><span class="hs-comment">--</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- Also, @J1 ~ 'Control.Monad.Trail.Trail'@</span><span>
</span><span id="line-205"></span><span class="hs-keyword">newtype</span><span> </span><span id="J1"><span class="annot"><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-var">J1</span></a></span></span><span> </span><span id="local-6989586621679075837"><span class="annot"><a href="#local-6989586621679075837"><span class="hs-identifier hs-type">mm</span></a></span></span><span> </span><span id="local-6989586621679075838"><span class="annot"><a href="#local-6989586621679075838"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="J1"><span class="annot"><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-var">J1</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runJ1"><span class="annot"><span class="annottext">forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. J1 mm a -&gt; mm (Pair a) ()
</span><a href="TrailAsAdjunction.html#runJ1"><span class="hs-identifier hs-var hs-var">runJ1</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679075837"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075838"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075843"><span id="local-6989586621679076082"><span class="annot"><span class="hs-identifier hs-type">FFunctor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075843"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-type">J1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075843"><span class="hs-identifier hs-type">mm</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621679076089"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; J1 mm a -&gt; J1 mm b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679076090"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076090"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">mm (Pair b) () -&gt; J1 mm b
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. mm (Pair a) () -&gt; J1 mm a
</span><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-var">J1</span></a></span><span> </span><span class="annot"><span class="annottext">(mm (Pair b) () -&gt; J1 mm b)
-&gt; (J1 mm a -&gt; mm (Pair b) ()) -&gt; J1 mm a -&gt; J1 mm b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Pair a ~&gt; Pair b) -&gt; mm (Pair a) () -&gt; mm (Pair b) ()
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; mm g x -&gt; mm h x
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *) x.
(FFunctor ff, Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ff g x -&gt; ff h x
</span><span class="hs-identifier hs-var">ffmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (a, x) -&gt; (b, x)
forall a b c. (a -&gt; b) -&gt; (a, c) -&gt; (b, c)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076090"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(mm (Pair a) () -&gt; mm (Pair b) ())
-&gt; (J1 mm a -&gt; mm (Pair a) ()) -&gt; J1 mm a -&gt; mm (Pair b) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">J1 mm a -&gt; mm (Pair a) ()
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. J1 mm a -&gt; mm (Pair a) ()
</span><a href="TrailAsAdjunction.html#runJ1"><span class="hs-identifier hs-var">runJ1</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075849"><span id="local-6989586621679076099"><span id="local-6989586621679076103"><span id="local-6989586621679076106"><span class="annot"><span class="hs-identifier hs-type">FMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075849"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-type">J1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075849"><span class="hs-identifier hs-type">mm</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621679076110"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; J1 mm a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">mm (Pair a) () -&gt; J1 mm a
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. mm (Pair a) () -&gt; J1 mm a
</span><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-var">J1</span></a></span><span> </span><span class="annot"><span class="annottext">(mm (Pair a) () -&gt; J1 mm a)
-&gt; (a -&gt; mm (Pair a) ()) -&gt; a -&gt; J1 mm a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pair a () -&gt; mm (Pair a) ()
Pair a ~&gt; mm (Pair a)
forall (g :: * -&gt; *). Functor g =&gt; g ~&gt; mm g
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *).
(FMonad ff, Functor g) =&gt;
g ~&gt; ff g
</span><span class="hs-identifier hs-var">fpure</span></span><span> </span><span class="annot"><span class="annottext">(Pair a () -&gt; mm (Pair a) ())
-&gt; (a -&gt; Pair a ()) -&gt; a -&gt; mm (Pair a) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>  </span><span id="local-6989586621679076113"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. J1 mm (a -&gt; b) -&gt; J1 mm a -&gt; J1 mm b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">J1 mm (a -&gt; b) -&gt; J1 mm a -&gt; J1 mm b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075851"><span id="local-6989586621679076119"><span id="local-6989586621679076122"><span class="annot"><span class="hs-identifier hs-type">FMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075851"><span class="hs-identifier hs-type">mm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-type">J1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075851"><span class="hs-identifier hs-type">mm</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621679076129"><span class="annot"><span class="annottext">J1 mm a
</span><a href="#local-6989586621679076129"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span id="local-6989586621679076130"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. J1 mm a -&gt; (a -&gt; J1 mm b) -&gt; J1 mm b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621679076131"><span class="annot"><span class="annottext">a -&gt; J1 mm b
</span><a href="#local-6989586621679076131"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">mm (Pair b) () -&gt; J1 mm b
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. mm (Pair a) () -&gt; J1 mm a
</span><a href="TrailAsAdjunction.html#J1"><span class="hs-identifier hs-var">J1</span></a></span><span> </span><span class="annot"><span class="annottext">(mm (Pair b) () -&gt; J1 mm b) -&gt; mm (Pair b) () -&gt; J1 mm b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pair a ~&gt; mm (Pair b)) -&gt; mm (Pair a) () -&gt; mm (Pair b) ()
forall (g :: * -&gt; *) (h :: * -&gt; *) a.
(Functor g, Functor h) =&gt;
(g ~&gt; mm h) -&gt; mm g a -&gt; mm h a
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *) a.
(FMonad ff, Functor g, Functor h) =&gt;
(g ~&gt; ff h) -&gt; ff g a -&gt; ff h a
</span><span class="hs-identifier hs-var">fbind</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Shape (mm (Pair b))) -&gt; Pair a ~&gt; mm (Pair b)
forall (f :: * -&gt; *) a. Functor f =&gt; (a -&gt; Shape f) -&gt; Pair a ~&gt; f
</span><a href="TrailAsAdjunction.html#adjunctPairShape%27"><span class="hs-identifier hs-var">adjunctPairShape'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">J1 mm b -&gt; Shape (mm (Pair b))
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(J1 mm b -&gt; Shape (mm (Pair b)))
-&gt; (a -&gt; J1 mm b) -&gt; a -&gt; Shape (mm (Pair b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; J1 mm b
</span><a href="#local-6989586621679076131"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">J1 mm a -&gt; mm (Pair a) ()
forall (mm :: (* -&gt; *) -&gt; * -&gt; *) a. J1 mm a -&gt; mm (Pair a) ()
</span><a href="TrailAsAdjunction.html#runJ1"><span class="hs-identifier hs-var">runJ1</span></a></span><span> </span><span class="annot"><span class="annottext">J1 mm a
</span><a href="#local-6989586621679076129"><span class="hs-identifier hs-var">ma</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><span class="hs-comment">-- | @RR ww ~ &#915; &#8728; ww &#8728; Y@</span></span><span>
</span><span id="line-218"></span><span class="hs-keyword">newtype</span><span> </span><span id="RR"><span class="annot"><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-var">RR</span></a></span></span><span> </span><span id="local-6989586621679075858"><span class="annot"><a href="#local-6989586621679075858"><span class="hs-identifier hs-type">ww</span></a></span></span><span> </span><span id="local-6989586621679075859"><span class="annot"><a href="#local-6989586621679075859"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RR"><span class="annot"><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-var">RR</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runRR"><span class="annot"><span class="annottext">forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. RR ww a -&gt; &#915; (ww (Y a))
</span><a href="TrailAsAdjunction.html#runRR"><span class="hs-identifier hs-var hs-var">runRR</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-type">&#915;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075858"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075859"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075864"><span id="local-6989586621679076138"><span class="annot"><span class="hs-identifier hs-type">FFunctor</span></span><span> </span><span class="annot"><a href="#local-6989586621679075864"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-type">RR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075864"><span class="hs-identifier hs-type">ww</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>  </span><span id="local-6989586621679076141"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; RR ww a -&gt; RR ww b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679076142"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076142"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">&#915; (ww (Y b)) -&gt; RR ww b
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. &#915; (ww (Y a)) -&gt; RR ww a
</span><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-var">RR</span></a></span><span> </span><span class="annot"><span class="annottext">(&#915; (ww (Y b)) -&gt; RR ww b)
-&gt; (RR ww a -&gt; &#915; (ww (Y b))) -&gt; RR ww a -&gt; RR ww b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ww (Y b) ~&gt; ww (Y a)) -&gt; &#915; (ww (Y a)) -&gt; &#915; (ww (Y b))
forall (f :: * -&gt; *) (g :: * -&gt; *). (f ~&gt; g) -&gt; &#915; g -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#map%393"><span class="hs-identifier hs-var">map&#915;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Y b ~&gt; Y a) -&gt; ww (Y b) x -&gt; ww (Y a) x
forall (g :: * -&gt; *) (h :: * -&gt; *) x.
(Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ww g x -&gt; ww h x
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *) x.
(FFunctor ff, Functor g, Functor h) =&gt;
(g ~&gt; h) -&gt; ff g x -&gt; ff h x
</span><span class="hs-identifier hs-var">ffmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Y b ~&gt; Y a
forall a b. (a -&gt; b) -&gt; Y b ~&gt; Y a
</span><a href="TrailAsAdjunction.html#mapY"><span class="hs-identifier hs-var">mapY</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076142"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(&#915; (ww (Y a)) -&gt; &#915; (ww (Y b)))
-&gt; (RR ww a -&gt; &#915; (ww (Y a))) -&gt; RR ww a -&gt; &#915; (ww (Y b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RR ww a -&gt; &#915; (ww (Y a))
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. RR ww a -&gt; &#915; (ww (Y a))
</span><a href="TrailAsAdjunction.html#runRR"><span class="hs-identifier hs-var">runRR</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075871"><span id="local-6989586621679076154"><span id="local-6989586621679076158"><span id="local-6989586621679076161"><span class="annot"><span class="hs-identifier hs-type">FComonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075871"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-type">RR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075871"><span class="hs-identifier hs-type">ww</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>  </span><span id="local-6989586621679076163"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; RR ww a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621679076164"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679076164"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">&#915; (ww (Y a)) -&gt; RR ww a
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. &#915; (ww (Y a)) -&gt; RR ww a
</span><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-var">RR</span></a></span><span> </span><span class="annot"><span class="annottext">(&#915; (ww (Y a)) -&gt; RR ww a) -&gt; &#915; (ww (Y a)) -&gt; RR ww a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall x. ww (Y a) x -&gt; x) -&gt; &#915; (ww (Y a))
forall (f :: * -&gt; *). (forall x. f x -&gt; x) -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-var">&#915;</span></a></span><span> </span><span class="annot"><span class="annottext">((forall x. ww (Y a) x -&gt; x) -&gt; &#915; (ww (Y a)))
-&gt; (forall x. ww (Y a) x -&gt; x) -&gt; &#915; (ww (Y a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076167"><span class="annot"><span class="annottext">ww (Y a) x
</span><a href="#local-6989586621679076167"><span class="hs-identifier hs-var">wwk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ww (Y a) x -&gt; a -&gt; x
ww (Y a) ~&gt; Y a
forall (g :: * -&gt; *). Functor g =&gt; ww g ~&gt; g
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *).
(FComonad ff, Functor g) =&gt;
ff g ~&gt; g
</span><span class="hs-identifier hs-var">fextract</span></span><span> </span><span class="annot"><span class="annottext">ww (Y a) x
</span><a href="#local-6989586621679076167"><span class="hs-identifier hs-var">wwk</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679076164"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621679076170"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. RR ww (a -&gt; b) -&gt; RR ww a -&gt; RR ww b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RR ww (a -&gt; b) -&gt; RR ww a -&gt; RR ww b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075874"><span id="local-6989586621679076176"><span id="local-6989586621679076179"><span class="annot"><span class="hs-identifier hs-type">FComonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075874"><span class="hs-identifier hs-type">ww</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-type">RR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075874"><span class="hs-identifier hs-type">ww</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>  </span><span id="local-6989586621679076181"><span class="annot"><span class="annottext">RR ww a
</span><a href="#local-6989586621679076181"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span id="local-6989586621679076182"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. RR ww a -&gt; (a -&gt; RR ww b) -&gt; RR ww b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621679076183"><span class="annot"><span class="annottext">a -&gt; RR ww b
</span><a href="#local-6989586621679076183"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">&#915; (ww (Y b)) -&gt; RR ww b
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. &#915; (ww (Y a)) -&gt; RR ww a
</span><a href="TrailAsAdjunction.html#RR"><span class="hs-identifier hs-var">RR</span></a></span><span> </span><span class="annot"><span class="annottext">(&#915; (ww (Y b)) -&gt; RR ww b) -&gt; &#915; (ww (Y b)) -&gt; RR ww b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall x. ww (Y b) x -&gt; x) -&gt; &#915; (ww (Y b))
forall (f :: * -&gt; *). (forall x. f x -&gt; x) -&gt; &#915; f
</span><a href="TrailAsAdjunction.html#%393"><span class="hs-identifier hs-var">&#915;</span></a></span><span> </span><span class="annot"><span class="annottext">((forall x. ww (Y b) x -&gt; x) -&gt; &#915; (ww (Y b)))
-&gt; (forall x. ww (Y b) x -&gt; x) -&gt; &#915; (ww (Y b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076187"><span class="annot"><span class="annottext">ww (Y b) x
</span><a href="#local-6989586621679076187"><span class="hs-identifier hs-var">wwk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">&#915; (ww (Y a)) -&gt; forall x. ww (Y a) x -&gt; x
forall (f :: * -&gt; *). &#915; f -&gt; forall x. f x -&gt; x
</span><a href="TrailAsAdjunction.html#get%393"><span class="hs-identifier hs-var">get&#915;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RR ww a -&gt; &#915; (ww (Y a))
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. RR ww a -&gt; &#915; (ww (Y a))
</span><a href="TrailAsAdjunction.html#runRR"><span class="hs-identifier hs-var">runRR</span></a></span><span> </span><span class="annot"><span class="annottext">RR ww a
</span><a href="#local-6989586621679076181"><span class="hs-identifier hs-var">ma</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ww (Y b) ~&gt; Y a) -&gt; ww (Y b) ~&gt; ww (Y a)
forall (g :: * -&gt; *) (h :: * -&gt; *).
(Functor g, Functor h) =&gt;
(ww g ~&gt; h) -&gt; ww g ~&gt; ww h
forall (ff :: (* -&gt; *) -&gt; * -&gt; *) (g :: * -&gt; *) (h :: * -&gt; *).
(FComonad ff, Functor g, Functor h) =&gt;
(ff g ~&gt; h) -&gt; ff g ~&gt; ff h
</span><span class="hs-identifier hs-var">fextend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; &#915; (ww (Y b))) -&gt; ww (Y b) ~&gt; Y a
forall a (f :: * -&gt; *). (a -&gt; &#915; f) -&gt; f ~&gt; Y a
</span><a href="TrailAsAdjunction.html#adjunct%393Y"><span class="hs-identifier hs-var">adjunct&#915;Y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RR ww b -&gt; &#915; (ww (Y b))
forall (ww :: (* -&gt; *) -&gt; * -&gt; *) a. RR ww a -&gt; &#915; (ww (Y a))
</span><a href="TrailAsAdjunction.html#runRR"><span class="hs-identifier hs-var">runRR</span></a></span><span> </span><span class="annot"><span class="annottext">(RR ww b -&gt; &#915; (ww (Y b))) -&gt; (a -&gt; RR ww b) -&gt; a -&gt; &#915; (ww (Y b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; RR ww b
</span><a href="#local-6989586621679076183"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ww (Y b) x
</span><a href="#local-6989586621679076187"><span class="hs-identifier hs-var">wwk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><span class="hs-comment">-- | @RR ww@ specialized to @ww = Precompose w@</span></span><span>
</span><span id="line-231"></span><span class="hs-keyword">newtype</span><span> </span><span id="R"><span class="annot"><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-var">R</span></a></span></span><span> </span><span id="local-6989586621679075882"><span class="annot"><a href="#local-6989586621679075882"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621679075883"><span class="annot"><a href="#local-6989586621679075883"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="R"><span class="annot"><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-var">R</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runR"><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. R w a -&gt; forall r. (a -&gt; w r) -&gt; r
</span><a href="TrailAsAdjunction.html#runR"><span class="hs-identifier hs-var hs-var">runR</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679075885"><span class="annot"><a href="#local-6989586621679075885"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679075883"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075882"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075885"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679075885"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075890"><span id="local-6989586621679076191"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-type">R</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075890"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>  </span><span id="local-6989586621679076194"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; R w a -&gt; R w b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679076195"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076195"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679076196"><span class="annot"><span class="annottext">R w a
</span><a href="#local-6989586621679076196"><span class="hs-identifier hs-var">rw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (b -&gt; w r) -&gt; r) -&gt; R w b
forall (w :: * -&gt; *) a. (forall r. (a -&gt; w r) -&gt; r) -&gt; R w a
</span><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-var">R</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r. (b -&gt; w r) -&gt; r) -&gt; R w b)
-&gt; (forall r. (b -&gt; w r) -&gt; r) -&gt; R w b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076197"><span class="annot"><span class="annottext">b -&gt; w r
</span><a href="#local-6989586621679076197"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">R w a -&gt; forall r. (a -&gt; w r) -&gt; r
forall (w :: * -&gt; *) a. R w a -&gt; forall r. (a -&gt; w r) -&gt; r
</span><a href="TrailAsAdjunction.html#runR"><span class="hs-identifier hs-var">runR</span></a></span><span> </span><span class="annot"><span class="annottext">R w a
</span><a href="#local-6989586621679076196"><span class="hs-identifier hs-var">rw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; w r
</span><a href="#local-6989586621679076197"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">(b -&gt; w r) -&gt; (a -&gt; b) -&gt; a -&gt; w r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679076195"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075895"><span id="local-6989586621679076204"><span id="local-6989586621679076208"><span id="local-6989586621679076211"><span class="annot"><span class="hs-identifier hs-type">Comonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075895"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-type">R</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075895"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>  </span><span id="local-6989586621679076213"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; R w a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621679076214"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679076214"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (a -&gt; w r) -&gt; r) -&gt; R w a
forall (w :: * -&gt; *) a. (forall r. (a -&gt; w r) -&gt; r) -&gt; R w a
</span><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-var">R</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r. (a -&gt; w r) -&gt; r) -&gt; R w a)
-&gt; (forall r. (a -&gt; w r) -&gt; r) -&gt; R w a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076216"><span class="annot"><span class="annottext">a -&gt; w r
</span><a href="#local-6989586621679076216"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">w r -&gt; r
forall a. w a -&gt; a
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><span class="hs-identifier hs-var">extract</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; w r
</span><a href="#local-6989586621679076216"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679076214"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span id="local-6989586621679076219"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. R w (a -&gt; b) -&gt; R w a -&gt; R w b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">R w (a -&gt; b) -&gt; R w a -&gt; R w b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679075898"><span id="local-6989586621679076225"><span id="local-6989586621679076228"><span class="annot"><span class="hs-identifier hs-type">Comonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679075898"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-type">R</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679075898"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>  </span><span id="local-6989586621679076230"><span class="annot"><span class="annottext">R w a
</span><a href="#local-6989586621679076230"><span class="hs-identifier hs-var">rw</span></a></span></span><span> </span><span id="local-6989586621679076231"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. R w a -&gt; (a -&gt; R w b) -&gt; R w b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621679076232"><span class="annot"><span class="annottext">a -&gt; R w b
</span><a href="#local-6989586621679076232"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (b -&gt; w r) -&gt; r) -&gt; R w b
forall (w :: * -&gt; *) a. (forall r. (a -&gt; w r) -&gt; r) -&gt; R w a
</span><a href="TrailAsAdjunction.html#R"><span class="hs-identifier hs-var">R</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r. (b -&gt; w r) -&gt; r) -&gt; R w b)
-&gt; (forall r. (b -&gt; w r) -&gt; r) -&gt; R w b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076234"><span class="annot"><span class="annottext">b -&gt; w r
</span><a href="#local-6989586621679076234"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">R w a -&gt; forall r. (a -&gt; w r) -&gt; r
forall (w :: * -&gt; *) a. R w a -&gt; forall r. (a -&gt; w r) -&gt; r
</span><a href="TrailAsAdjunction.html#runR"><span class="hs-identifier hs-var">runR</span></a></span><span> </span><span class="annot"><span class="annottext">R w a
</span><a href="#local-6989586621679076230"><span class="hs-identifier hs-var">rw</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679076235"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679076235"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">R w b -&gt; forall r. (b -&gt; w r) -&gt; r
forall (w :: * -&gt; *) a. R w a -&gt; forall r. (a -&gt; w r) -&gt; r
</span><a href="TrailAsAdjunction.html#runR"><span class="hs-identifier hs-var">runR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; R w b
</span><a href="#local-6989586621679076232"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679076235"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">w r -&gt; w (w r)
forall a. w a -&gt; w (w a)
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; w (w a)
</span><span class="hs-identifier hs-var">duplicate</span></span><span> </span><span class="annot"><span class="annottext">(w r -&gt; w (w r)) -&gt; (b -&gt; w r) -&gt; b -&gt; w (w r)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; w r
</span><a href="#local-6989586621679076234"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></pre></body></html>